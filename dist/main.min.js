(()=>{var He=Object.create,Ot=Object.defineProperty,ze=Object.getPrototypeOf,Ve=Object.prototype.hasOwnProperty,Ge=Object.getOwnPropertyNames,Qe=Object.getOwnPropertyDescriptor;var We=I=>Ot(I,"__esModule",{value:!0});var Xe=(I,o)=>()=>(o||I((o={exports:{}}).exports,o),o.exports);var Ye=(I,o,y)=>{if(o&&typeof o=="object"||typeof o=="function")for(let g of Ge(o))!Ve.call(I,g)&&g!=="default"&&Ot(I,g,{get:()=>o[g],enumerable:!(y=Qe(o,g))||y.enumerable});return I},Ze=I=>Ye(We(Ot(I!=null?He(ze(I)):{},"default",I&&I.__esModule&&"default"in I?{get:()=>I.default,enumerable:!0}:{value:I,enumerable:!0})),I);var ue=Xe((_t,Ct)=>{var jt,pt;jt=_t,pt=function(){"use strict";function I(r){return(I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function o(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function y(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function g(r,t,e){return t&&y(r.prototype,t),e&&y(r,e),r}function E(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function $(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function Y(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?$(Object(e),!0).forEach(function(n){E(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):$(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function T(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&nt(r,t)}function Z(r){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(r)}function nt(r,t){return(nt=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(r,t)}function rt(r,t){return!t||typeof t!="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r):t}function _(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,n=Z(r);if(t){var i=Z(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return rt(this,e)}}function C(r){return function(t){if(Array.isArray(t))return J(t)}(r)||function(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}(r)||function(t,e){if(t){if(typeof t=="string")return J(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(t,e):void 0}}(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function J(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function j(r){return Array.isArray?Array.isArray(r):Bt(r)==="[object Array]"}function F(r){return typeof r=="string"}function it(r){return typeof r=="number"}function de(r){return r===!0||r===!1||function(t){return Rt(t)&&t!==null}(r)&&Bt(r)=="[object Boolean]"}function Rt(r){return I(r)==="object"}function A(r){return r!=null}function gt(r){return!r.trim().length}function Bt(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}var fe=function(r){return"Invalid value for key ".concat(r)},me=function(r){return"Pattern length exceeds max of ".concat(r,".")},Kt=Object.prototype.hasOwnProperty,pe=function(){function r(t){var e=this;o(this,r),this._keys=[],this._keyMap={};var n=0;t.forEach(function(i){var s=Dt(i);n+=s.weight,e._keys.push(s),e._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(function(i){i.weight/=n})}return g(r,[{key:"get",value:function(t){return this._keyMap[t]}},{key:"keys",value:function(){return this._keys}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),r}();function Dt(r){var t=null,e=null,n=null,i=1;if(F(r)||j(r))n=r,t=Ut(r),e=vt(r);else{if(!Kt.call(r,"name"))throw new Error(function(a){return"Missing ".concat(a," property in key")}("name"));var s=r.name;if(n=s,Kt.call(r,"weight")&&(i=r.weight)<=0)throw new Error(function(a){return"Property 'weight' in key '".concat(a,"' must be a positive integer")}(s));t=Ut(s),e=vt(s)}return{path:t,id:e,weight:i,src:n}}function Ut(r){return j(r)?r:r.split(".")}function vt(r){return j(r)?r.join("."):r}var p=Y({},{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(r,t){return r.score===t.score?r.idx<t.idx?-1:1:r.score<t.score?-1:1}},{},{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},{},{location:0,threshold:.6,distance:100},{},{useExtendedSearch:!1,getFn:function(r,t){var e=[],n=!1;return function i(s,a,c){if(A(s))if(a[c]){var u=s[a[c]];if(!A(u))return;if(c===a.length-1&&(F(u)||it(u)||de(u)))e.push(function(l){return l==null?"":function(d){if(typeof d=="string")return d;var f=d+"";return f=="0"&&1/d==-1/0?"-0":f}(l)}(u));else if(j(u)){n=!0;for(var h=0,m=u.length;h<m;h+=1)i(u[h],a,c+1)}else a.length&&i(u,a,c+1)}else e.push(s)}(r,F(t)?t.split("."):t,0),n?e:e[0]},ignoreLocation:!1,ignoreFieldNorm:!1}),ge=/[^ ]+/g;function ve(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3,t=new Map,e=Math.pow(10,r);return{get:function(n){var i=n.match(ge).length;if(t.has(i))return t.get(i);var s=1/Math.sqrt(i),a=parseFloat(Math.round(s*e)/e);return t.set(i,a),a},clear:function(){t.clear()}}}var yt=function(){function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.getFn,n=e===void 0?p.getFn:e;o(this,r),this.norm=ve(3),this.getFn=n,this.isCreated=!1,this.setIndexRecords()}return g(r,[{key:"setSources",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.docs=t}},{key:"setIndexRecords",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.records=t}},{key:"setKeys",value:function(){var t=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.keys=e,this._keysMap={},e.forEach(function(n,i){t._keysMap[n.id]=i})}},{key:"create",value:function(){var t=this;!this.isCreated&&this.docs.length&&(this.isCreated=!0,F(this.docs[0])?this.docs.forEach(function(e,n){t._addString(e,n)}):this.docs.forEach(function(e,n){t._addObject(e,n)}),this.norm.clear())}},{key:"add",value:function(t){var e=this.size();F(t)?this._addString(t,e):this._addObject(t,e)}},{key:"removeAt",value:function(t){this.records.splice(t,1);for(var e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}},{key:"getValueForItemAtKeyId",value:function(t,e){return t[this._keysMap[e]]}},{key:"size",value:function(){return this.records.length}},{key:"_addString",value:function(t,e){if(A(t)&&!gt(t)){var n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}}},{key:"_addObject",value:function(t,e){var n=this,i={i:e,$:{}};this.keys.forEach(function(s,a){var c=n.getFn(t,s.path);if(A(c)){if(j(c))(function(){for(var h=[],m=[{nestedArrIndex:-1,value:c}];m.length;){var l=m.pop(),d=l.nestedArrIndex,f=l.value;if(A(f))if(F(f)&&!gt(f)){var v={v:f,i:d,n:n.norm.get(f)};h.push(v)}else j(f)&&f.forEach(function(k,M){m.push({nestedArrIndex:M,value:k})})}i.$[a]=h})();else if(!gt(c)){var u={v:c,n:n.norm.get(c)};i.$[a]=u}}}),this.records.push(i)}},{key:"toJSON",value:function(){return{keys:this.keys,records:this.records}}}]),r}();function qt(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=e.getFn,i=n===void 0?p.getFn:n,s=new yt({getFn:i});return s.setKeys(r.map(Dt)),s.setSources(t),s.create(),s}function st(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=t.errors,n=e===void 0?0:e,i=t.currentLocation,s=i===void 0?0:i,a=t.expectedLocation,c=a===void 0?0:a,u=t.distance,h=u===void 0?p.distance:u,m=t.ignoreLocation,l=m===void 0?p.ignoreLocation:m,d=n/r.length;if(l)return d;var f=Math.abs(c-s);return h?d+f/h:f?1:d}function ye(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.minMatchCharLength,e=[],n=-1,i=-1,s=0,a=r.length;s<a;s+=1){var c=r[s];c&&n===-1?n=s:c||n===-1||((i=s-1)-n+1>=t&&e.push([n,i]),n=-1)}return r[s-1]&&s-n>=t&&e.push([n,s-1]),e}function ke(r){for(var t={},e=0,n=r.length;e<n;e+=1){var i=r.charAt(e);t[i]=(t[i]||0)|1<<n-e-1}return t}var Nt=function(){function r(t){var e=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.location,s=i===void 0?p.location:i,a=n.threshold,c=a===void 0?p.threshold:a,u=n.distance,h=u===void 0?p.distance:u,m=n.includeMatches,l=m===void 0?p.includeMatches:m,d=n.findAllMatches,f=d===void 0?p.findAllMatches:d,v=n.minMatchCharLength,k=v===void 0?p.minMatchCharLength:v,M=n.isCaseSensitive,b=M===void 0?p.isCaseSensitive:M,w=n.ignoreLocation,x=w===void 0?p.ignoreLocation:w;if(o(this,r),this.options={location:s,threshold:c,distance:h,includeMatches:l,findAllMatches:f,minMatchCharLength:k,isCaseSensitive:b,ignoreLocation:x},this.pattern=b?t:t.toLowerCase(),this.chunks=[],this.pattern.length){var O=function(B,wt){e.chunks.push({pattern:B,alphabet:ke(B),startIndex:wt})},S=this.pattern.length;if(S>32){for(var L=0,R=S%32,z=S-R;L<z;)O(this.pattern.substr(L,32),L),L+=32;if(R){var D=S-32;O(this.pattern.substr(D),D)}}else O(this.pattern,0)}}return g(r,[{key:"searchIn",value:function(t){var e=this.options,n=e.isCaseSensitive,i=e.includeMatches;if(n||(t=t.toLowerCase()),this.pattern===t){var s={isMatch:!0,score:0};return i&&(s.indices=[[0,t.length-1]]),s}var a=this.options,c=a.location,u=a.distance,h=a.threshold,m=a.findAllMatches,l=a.minMatchCharLength,d=a.ignoreLocation,f=[],v=0,k=!1;this.chunks.forEach(function(b){var w=b.pattern,x=b.alphabet,O=b.startIndex,S=function(D,B,wt){var N=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Yt=N.location,Re=Yt===void 0?p.location:Yt,Zt=N.distance,at=Zt===void 0?p.distance:Zt,Jt=N.threshold,Be=Jt===void 0?p.threshold:Jt,te=N.findAllMatches,Ke=te===void 0?p.findAllMatches:te,ee=N.minMatchCharLength,ne=ee===void 0?p.minMatchCharLength:ee,re=N.includeMatches,ie=re===void 0?p.includeMatches:re,se=N.ignoreLocation,ct=se===void 0?p.ignoreLocation:se;if(B.length>32)throw new Error(me(32));for(var ut,V=B.length,et=D.length,P=Math.max(0,Math.min(Re,et)),G=Be,Q=P,ht=ne>1||ie,Et=ht?Array(et):[];(ut=D.indexOf(B,Q))>-1;){var De=st(B,{currentLocation:ut,expectedLocation:P,distance:at,ignoreLocation:ct});if(G=Math.min(De,G),Q=ut+V,ht)for(var xt=0;xt<V;)Et[ut+xt]=1,xt+=1}Q=-1;for(var lt=[],St=1,dt=V+et,Ue=1<<V-1,H=0;H<V;H+=1){for(var ft=0,q=dt;ft<q;){var qe=st(B,{errors:H,currentLocation:P+q,expectedLocation:P,distance:at,ignoreLocation:ct});qe<=G?ft=q:dt=q,q=Math.floor((dt-ft)/2+ft)}dt=q;var oe=Math.max(1,P-q+1),Lt=Ke?et:Math.min(P+q,et)+V,W=Array(Lt+2);W[Lt+1]=(1<<H)-1;for(var K=Lt;K>=oe;K-=1){var mt=K-1,ae=wt[D.charAt(mt)];if(ht&&(Et[mt]=+!!ae),W[K]=(W[K+1]<<1|1)&ae,H&&(W[K]|=(lt[K+1]|lt[K])<<1|1|lt[K+1]),W[K]&Ue&&(St=st(B,{errors:H,currentLocation:mt,expectedLocation:P,distance:at,ignoreLocation:ct}))<=G){if(G=St,(Q=mt)<=P)break;oe=Math.max(1,2*P-Q)}}var Ne=st(B,{errors:H+1,currentLocation:P,expectedLocation:P,distance:at,ignoreLocation:ct});if(Ne>G)break;lt=W}var At={isMatch:Q>=0,score:Math.max(.001,St)};if(ht){var ce=ye(Et,ne);ce.length?ie&&(At.indices=ce):At.isMatch=!1}return At}(t,w,x,{location:c+O,distance:u,threshold:h,findAllMatches:m,minMatchCharLength:l,includeMatches:i,ignoreLocation:d}),L=S.isMatch,R=S.score,z=S.indices;L&&(k=!0),v+=R,L&&z&&(f=[].concat(C(f),C(z)))});var M={isMatch:k,score:k?v/this.chunks.length:1};return k&&i&&(M.indices=f),M}}]),r}(),U=function(){function r(t){o(this,r),this.pattern=t}return g(r,[{key:"search",value:function(){}}],[{key:"isMultiMatch",value:function(t){return Ht(t,this.multiRegex)}},{key:"isSingleMatch",value:function(t){return Ht(t,this.singleRegex)}}]),r}();function Ht(r,t){var e=r.match(t);return e?e[1]:null}var Me=function(r){T(e,r);var t=_(e);function e(n){return o(this,e),t.call(this,n)}return g(e,[{key:"search",value:function(n){var i=n===this.pattern;return{isMatch:i,score:i?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"exact"}},{key:"multiRegex",get:function(){return/^="(.*)"$/}},{key:"singleRegex",get:function(){return/^=(.*)$/}}]),e}(U),Ie=function(r){T(e,r);var t=_(e);function e(n){return o(this,e),t.call(this,n)}return g(e,[{key:"search",value:function(n){var i=n.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,n.length-1]}}}],[{key:"type",get:function(){return"inverse-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"$/}},{key:"singleRegex",get:function(){return/^!(.*)$/}}]),e}(U),be=function(r){T(e,r);var t=_(e);function e(n){return o(this,e),t.call(this,n)}return g(e,[{key:"search",value:function(n){var i=n.startsWith(this.pattern);return{isMatch:i,score:i?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"prefix-exact"}},{key:"multiRegex",get:function(){return/^\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^\^(.*)$/}}]),e}(U),we=function(r){T(e,r);var t=_(e);function e(n){return o(this,e),t.call(this,n)}return g(e,[{key:"search",value:function(n){var i=!n.startsWith(this.pattern);return{isMatch:i,score:i?0:1,indices:[0,n.length-1]}}}],[{key:"type",get:function(){return"inverse-prefix-exact"}},{key:"multiRegex",get:function(){return/^!\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^!\^(.*)$/}}]),e}(U),Ee=function(r){T(e,r);var t=_(e);function e(n){return o(this,e),t.call(this,n)}return g(e,[{key:"search",value:function(n){var i=n.endsWith(this.pattern);return{isMatch:i,score:i?0:1,indices:[n.length-this.pattern.length,n.length-1]}}}],[{key:"type",get:function(){return"suffix-exact"}},{key:"multiRegex",get:function(){return/^"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^(.*)\$$/}}]),e}(U),xe=function(r){T(e,r);var t=_(e);function e(n){return o(this,e),t.call(this,n)}return g(e,[{key:"search",value:function(n){var i=!n.endsWith(this.pattern);return{isMatch:i,score:i?0:1,indices:[0,n.length-1]}}}],[{key:"type",get:function(){return"inverse-suffix-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^!(.*)\$$/}}]),e}(U),zt=function(r){T(e,r);var t=_(e);function e(n){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.location,c=a===void 0?p.location:a,u=s.threshold,h=u===void 0?p.threshold:u,m=s.distance,l=m===void 0?p.distance:m,d=s.includeMatches,f=d===void 0?p.includeMatches:d,v=s.findAllMatches,k=v===void 0?p.findAllMatches:v,M=s.minMatchCharLength,b=M===void 0?p.minMatchCharLength:M,w=s.isCaseSensitive,x=w===void 0?p.isCaseSensitive:w,O=s.ignoreLocation,S=O===void 0?p.ignoreLocation:O;return o(this,e),(i=t.call(this,n))._bitapSearch=new Nt(n,{location:c,threshold:h,distance:l,includeMatches:f,findAllMatches:k,minMatchCharLength:b,isCaseSensitive:x,ignoreLocation:S}),i}return g(e,[{key:"search",value:function(n){return this._bitapSearch.searchIn(n)}}],[{key:"type",get:function(){return"fuzzy"}},{key:"multiRegex",get:function(){return/^"(.*)"$/}},{key:"singleRegex",get:function(){return/^(.*)$/}}]),e}(U),Vt=function(r){T(e,r);var t=_(e);function e(n){return o(this,e),t.call(this,n)}return g(e,[{key:"search",value:function(n){for(var i,s=0,a=[],c=this.pattern.length;(i=n.indexOf(this.pattern,s))>-1;)s=i+c,a.push([i,s-1]);var u=!!a.length;return{isMatch:u,score:u?0:1,indices:a}}}],[{key:"type",get:function(){return"include"}},{key:"multiRegex",get:function(){return/^'"(.*)"$/}},{key:"singleRegex",get:function(){return/^'(.*)$/}}]),e}(U),kt=[Me,Vt,be,we,xe,Ee,Ie,zt],Gt=kt.length,Se=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;function Le(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return r.split("|").map(function(e){for(var n=e.trim().split(Se).filter(function(v){return v&&!!v.trim()}),i=[],s=0,a=n.length;s<a;s+=1){for(var c=n[s],u=!1,h=-1;!u&&++h<Gt;){var m=kt[h],l=m.isMultiMatch(c);l&&(i.push(new m(l,t)),u=!0)}if(!u)for(h=-1;++h<Gt;){var d=kt[h],f=d.isSingleMatch(c);if(f){i.push(new d(f,t));break}}}return i})}var Ae=new Set([zt.type,Vt.type]),Oe=function(){function r(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.isCaseSensitive,i=n===void 0?p.isCaseSensitive:n,s=e.includeMatches,a=s===void 0?p.includeMatches:s,c=e.minMatchCharLength,u=c===void 0?p.minMatchCharLength:c,h=e.ignoreLocation,m=h===void 0?p.ignoreLocation:h,l=e.findAllMatches,d=l===void 0?p.findAllMatches:l,f=e.location,v=f===void 0?p.location:f,k=e.threshold,M=k===void 0?p.threshold:k,b=e.distance,w=b===void 0?p.distance:b;o(this,r),this.query=null,this.options={isCaseSensitive:i,includeMatches:a,minMatchCharLength:u,findAllMatches:d,ignoreLocation:m,location:v,threshold:M,distance:w},this.pattern=i?t:t.toLowerCase(),this.query=Le(this.pattern,this.options)}return g(r,[{key:"searchIn",value:function(t){var e=this.query;if(!e)return{isMatch:!1,score:1};var n=this.options,i=n.includeMatches;t=n.isCaseSensitive?t:t.toLowerCase();for(var s=0,a=[],c=0,u=0,h=e.length;u<h;u+=1){var m=e[u];a.length=0,s=0;for(var l=0,d=m.length;l<d;l+=1){var f=m[l],v=f.search(t),k=v.isMatch,M=v.indices,b=v.score;if(!k){c=0,s=0,a.length=0;break}if(s+=1,c+=b,i){var w=f.constructor.type;Ae.has(w)?a=[].concat(C(a),C(M)):a.push(M)}}if(s){var x={isMatch:!0,score:c/s};return i&&(x.indices=a),x}}return{isMatch:!1,score:1}}}],[{key:"condition",value:function(t,e){return e.useExtendedSearch}}]),r}(),ot=[];function Mt(r,t){for(var e=0,n=ot.length;e<n;e+=1){var i=ot[e];if(i.condition(r,t))return new i(r,t)}return new Nt(r,t)}var It="$and",Qt="$or",Wt="$path",_e="$val",bt=function(r){return!(!r[It]&&!r[Qt])},Ce=function(r){return!!r[Wt]},je=function(r){return!j(r)&&Rt(r)&&!bt(r)},Xt=function(r){return E({},It,Object.keys(r).map(function(t){return E({},t,r[t])}))};function Fe(r,t){var e=t.ignoreFieldNorm,n=e===void 0?p.ignoreFieldNorm:e;r.forEach(function(i){var s=1;i.matches.forEach(function(a){var c=a.key,u=a.norm,h=a.score,m=c?c.weight:null;s*=Math.pow(h===0&&m?Number.EPSILON:h,(m||1)*(n?1:u))}),i.score=s})}function Pe(r,t){var e=r.matches;t.matches=[],A(e)&&e.forEach(function(n){if(A(n.indices)&&n.indices.length){var i={indices:n.indices,value:n.value};n.key&&(i.key=n.key.src),n.idx>-1&&(i.refIndex=n.idx),t.matches.push(i)}})}function $e(r,t){t.score=r.score}function Te(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=e.includeMatches,i=n===void 0?p.includeMatches:n,s=e.includeScore,a=s===void 0?p.includeScore:s,c=[];return i&&c.push(Pe),a&&c.push($e),r.map(function(u){var h=u.idx,m={item:t[h],refIndex:h};return c.length&&c.forEach(function(l){l(u,m)}),m})}var tt=function(){function r(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;o(this,r),this.options=Y({},p,{},e),this.options.useExtendedSearch,this._keyStore=new pe(this.options.keys),this.setCollection(t,n)}return g(r,[{key:"setCollection",value:function(t,e){if(this._docs=t,e&&!(e instanceof yt))throw new Error("Incorrect 'index' type");this._myIndex=e||qt(this.options.keys,this._docs,{getFn:this.options.getFn})}},{key:"add",value:function(t){A(t)&&(this._docs.push(t),this._myIndex.add(t))}},{key:"remove",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){return!1},e=[],n=0,i=this._docs.length;n<i;n+=1){var s=this._docs[n];t(s,n)&&(this.removeAt(n),n-=1,i-=1,e.push(s))}return e}},{key:"removeAt",value:function(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}},{key:"getIndex",value:function(){return this._myIndex}},{key:"search",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.limit,i=n===void 0?-1:n,s=this.options,a=s.includeMatches,c=s.includeScore,u=s.shouldSort,h=s.sortFn,m=s.ignoreFieldNorm,l=F(t)?F(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Fe(l,{ignoreFieldNorm:m}),u&&l.sort(h),it(i)&&i>-1&&(l=l.slice(0,i)),Te(l,this._docs,{includeMatches:a,includeScore:c})}},{key:"_searchStringList",value:function(t){var e=Mt(t,this.options),n=this._myIndex.records,i=[];return n.forEach(function(s){var a=s.v,c=s.i,u=s.n;if(A(a)){var h=e.searchIn(a),m=h.isMatch,l=h.score,d=h.indices;m&&i.push({item:a,idx:c,matches:[{score:l,value:a,norm:u,indices:d}]})}}),i}},{key:"_searchLogical",value:function(t){var e=this,n=function(c,u){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},m=h.auto,l=m===void 0||m,d=function f(v){var k=Object.keys(v),M=Ce(v);if(!M&&k.length>1&&!bt(v))return f(Xt(v));if(je(v)){var b=M?v[Wt]:k[0],w=M?v[_e]:v[b];if(!F(w))throw new Error(fe(b));var x={keyId:vt(b),pattern:w};return l&&(x.searcher=Mt(w,u)),x}var O={children:[],operator:k[0]};return k.forEach(function(S){var L=v[S];j(L)&&L.forEach(function(R){O.children.push(f(R))})}),O};return bt(c)||(c=Xt(c)),d(c)}(t,this.options),i=this._myIndex.records,s={},a=[];return i.forEach(function(c){var u=c.$,h=c.i;if(A(u)){var m=function l(d,f,v){if(!d.children){var k=d.keyId,M=d.searcher,b=e._findMatches({key:e._keyStore.get(k),value:e._myIndex.getValueForItemAtKeyId(f,k),searcher:M});return b&&b.length?[{idx:v,item:f,matches:b}]:[]}switch(d.operator){case It:for(var w=[],x=0,O=d.children.length;x<O;x+=1){var S=l(d.children[x],f,v);if(!S.length)return[];w.push.apply(w,C(S))}return w;case Qt:for(var L=[],R=0,z=d.children.length;R<z;R+=1){var D=l(d.children[R],f,v);if(D.length){L.push.apply(L,C(D));break}}return L}}(n,u,h);m.length&&(s[h]||(s[h]={idx:h,item:u,matches:[]},a.push(s[h])),m.forEach(function(l){var d,f=l.matches;(d=s[h].matches).push.apply(d,C(f))}))}}),a}},{key:"_searchObjectList",value:function(t){var e=this,n=Mt(t,this.options),i=this._myIndex,s=i.keys,a=i.records,c=[];return a.forEach(function(u){var h=u.$,m=u.i;if(A(h)){var l=[];s.forEach(function(d,f){l.push.apply(l,C(e._findMatches({key:d,value:h[f],searcher:n})))}),l.length&&c.push({idx:m,item:h,matches:l})}}),c}},{key:"_findMatches",value:function(t){var e=t.key,n=t.value,i=t.searcher;if(!A(n))return[];var s=[];if(j(n))n.forEach(function(d){var f=d.v,v=d.i,k=d.n;if(A(f)){var M=i.searchIn(f),b=M.isMatch,w=M.score,x=M.indices;b&&s.push({score:w,key:e,value:f,idx:v,norm:k,indices:x})}});else{var a=n.v,c=n.n,u=i.searchIn(a),h=u.isMatch,m=u.score,l=u.indices;h&&s.push({score:m,key:e,value:a,norm:c,indices:l})}return s}}]),r}();return tt.version="6.4.6",tt.createIndex=qt,tt.parseIndex=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=t.getFn,n=e===void 0?p.getFn:e,i=r.keys,s=r.records,a=new yt({getFn:n});return a.setKeys(i),a.setIndexRecords(s),a},tt.config=p,function(){ot.push.apply(ot,arguments)}(Oe),tt},typeof _t=="object"&&typeof Ct!="undefined"?Ct.exports=pt():typeof define=="function"&&define.amd?define(pt):(jt=jt||self).Fuse=pt()});var Pt=Ze(ue());var Ft=class{constructor(o,y,g){this.title=o,this.action=y,this.parentTitle=g}},X=Ft;var $t=class{constructor(o,y){console.log("Initialising TurboAdmin"),this.options=y,this.paletteElement=document.getElementById("ta-command-palette-container"),this.paletteInputElement=document.getElementById("ta-command-palette-input"),this.paletteItemsElement=document.getElementById("ta-command-palette-items"),this.paletteData=o,this.paletteItems=this.buildPaletteItems(),this.selectedItem=this.paletteItems[0],this.updatePaletteItems(),this.paletteFuseOptions=[],this.paletteFuse=null,typeof Pt.default=="function"&&(this.paletteFuseOptions={keys:["innerText"]},this.paletteFuse=new Pt.default(this.paletteItems,this.paletteFuseOptions),document.addEventListener("keydown",g=>this.handleGlobalKey(g)),this.paletteInputElement.addEventListener("keydown",g=>{this.paletteActions(g)}),this.paletteElement.addEventListener("click",g=>{this.checkForClickToClose(g)}))}buildPaletteItems(){let o=[];return this.paletteData.forEach(y=>{let g=document.createElement("li"),E=document.createElement("a");g.appendChild(E),E.href=y.action;let $=y.title;y.parentTitle&&($=y.parentTitle+": "+$),E.innerHTML=$,o.push(g)}),o}handleGlobalKey(o){this.shortcutKeysPressed(o)&&(this.paletteShown()?this.hidePalette():this.showPalette()),o.code==="Escape"&&this.paletteShown()&&this.hidePalette(),(o.code==="ArrowUp"||o.code==="ArrowDown"||o.code==="Enter")&&this.paletteShown()&&o.preventDefault()}shortcutKeysPressed(o){return this.options.shortcutKeys.reduce((g,E)=>g||!(navigator.platform.startsWith("Mac")&&E.meta&&!o.metaKey||E.alt&&!o.altKey||E.shift&&!o.shiftKey||E.ctrl&&!o.ctrlKey||"Key"+E.key.toUpperCase()!==o.code),!1)}paletteActions(o){if(o.code==="ArrowDown"&&this.paletteShown()){o.preventDefault(),this.moveDown();return}if(o.code==="ArrowUp"&&this.paletteShown()){o.preventDefault(),this.moveUp();return}o.code==="Enter"&&this.paletteShown()&&this.doAction(),this.paletteSearchAndUpdate()}showPalette(){this.paletteInputElement.value="",this.paletteElement?.classList.add("active"),this.paletteInputElement?.focus()}hidePalette(){this.paletteElement?.classList.remove("active")}paletteShown(){return this.paletteElement?.classList.contains("active")}checkForClickToClose(o){o.target.id===this.paletteElement.id&&this.hidePalette()}setSelectedElement(){this.paletteItemsElement?.querySelectorAll("li.selected")?.forEach(o=>o.classList.remove("selected")),this.selectedItem&&(this.selectedItem.classList.add("selected"),this.scrollList())}scrollList(){this.selectedItem.offsetTop<this.paletteItemsElement.scrollTop&&(this.paletteItemsElement.scrollTop=this.selectedItem.offsetTop),this.selectedItem.offsetTop+this.selectedItem.offsetHeight>this.paletteItemsElement.offsetHeight+this.paletteItemsElement.scrollTop&&(this.paletteItemsElement.scrollTop=this.selectedItem.offsetTop+this.selectedItem.offsetHeight-this.paletteItemsElement.offsetHeight)}moveDown(){let o=this.selectedItem.nextElementSibling;o&&(this.selectedItem=o,this.setSelectedElement())}moveUp(){let o=this.selectedItem.previousElementSibling;o&&(this.selectedItem=o,this.setSelectedElement())}doAction(){this.hidePalette(),this.selectedItem.querySelector("a").click()}selectedItemDisplayed(){return Array.from(this.paletteItemsElement.childNodes).includes(this.selectedItem)}paletteSearchAndUpdate(){this.paletteSearch(),this.updatePaletteItems()}paletteSearch(){this.paletteItems=this.buildPaletteItems(),this.paletteInputElement.value!==""&&(this.paletteItems=this.paletteFuse.search(this.paletteInputElement.value).map(o=>o.item))}updatePaletteItems(){let o=document.createElement("ul");o.id="ta-command-palette-items",this.paletteItems.forEach(y=>{o.appendChild(y)}),this.paletteItemsElement.replaceChildren(...o.children),this.selectedItemDisplayed()||(this.selectedItem=this.paletteItems[0]),this.setSelectedElement()}},he=$t;var Tt=class{constructor(o){if(document.getElementById("ta-command-palette-container")){console.log("TurboAdmin already initialised - I won't make a second copy!");return}if(this.options=o,this.isBackend())this.siteUrl=window.location.href.match(/(^.*wp-admin)/)[1],this.home=document.getElementById("wp-admin-bar-site-name").querySelector("a").href;else{if(!document.getElementById("wpadminbar"))return;this.siteUrl=document.getElementById("wp-admin-bar-dashboard").querySelector("a").href,this.home=null}this.menu=this.getMenu(),this.addAdditionalMenuItems(),this.addPalette(),this.turboAdminPalette=new he(this.menu,this.options)}getMenu(){let o=[],y=document.getElementById("adminmenu");return y&&y.querySelectorAll("li.menu-top").forEach(E=>{let $=E.querySelector("a.menu-top"),Y=$.querySelector(".wp-menu-name").innerHTML,T=$.href,Z="",nt=new X(Y,T,Z);o.push(nt);let rt=E.querySelector(".wp-submenu");if(!rt)return;let _=rt.querySelectorAll("li a");!_||_.forEach(C=>{let J=Y,j=C.innerHTML,F=C.href,it=new X(j,F,J);o.push(it)})}),o}isBackend(){return document.body.classList.contains("wp-admin")}addAdditionalMenuItems(){this.home&&this.menu.push(new X("View/visit site",this.home,"")),this.siteUrl&&!this.isBackend()&&this.menu.push(new X("Dashboard / Admin",this.siteUrl,""));let o=document.getElementById("wp-admin-bar-logout").querySelector("a").href;this.menu.push(new X("Logout",o,""))}addPalette(){let o=document.createElement("div");o.id="ta-command-palette-container";let y=document.createElement("div");y.id="ta-command-palette";let g=document.createElement("input");g.id="ta-command-palette-input",g.name="ta-command-palette-input",g.type="text";let E=document.createElement("ul");E.id="ta-command-palette-items",o.appendChild(y),y.appendChild(g),y.appendChild(E),document.getElementById("wpadminbar").insertAdjacentElement("afterend",o)}},le=Tt;globalThis.turboAdmin=null;globalThis.turboAdminOptions={shortcutKeys:globalThis.wpTurboAdmin.keys};document.addEventListener("DOMContentLoaded",I=>{turboAdmin=new le(globalThis.turboAdminOptions)});})();
//# sourceMappingURL=main.min.js.map
