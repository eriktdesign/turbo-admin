(()=>{var He=Object.create,Ft=Object.defineProperty,ze=Object.getPrototypeOf,Ve=Object.prototype.hasOwnProperty,Ge=Object.getOwnPropertyNames,We=Object.getOwnPropertyDescriptor;var Qe=M=>Ft(M,"__esModule",{value:!0});var Xe=(M,s)=>()=>(s||M((s={exports:{}}).exports,s),s.exports);var Ye=(M,s,a)=>{if(s&&typeof s=="object"||typeof s=="function")for(let d of Ge(s))!Ve.call(M,d)&&d!=="default"&&Ft(M,d,{get:()=>s[d],enumerable:!(a=We(s,d))||a.enumerable});return M},Ze=M=>Ye(Qe(Ft(M!=null?He(ze(M)):{},"default",M&&M.__esModule&&"default"in M?{get:()=>M.default,enumerable:!0}:{value:M,enumerable:!0})),M);var ue=Xe((Tt,Ct)=>{var Ot,mt;Ot=Tt,mt=function(){"use strict";function M(i){return(M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(i)}function s(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function a(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function d(i,t,e){return t&&a(i.prototype,t),e&&a(i,e),i}function k(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function T(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),e.push.apply(e,n)}return e}function X(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?T(Object(e),!0).forEach(function(n){k(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):T(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function $(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&et(i,t)}function Y(i){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(i)}function et(i,t){return(et=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(i,t)}function nt(i,t){return!t||typeof t!="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i):t}function C(i){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,n=Y(i);if(t){var r=Y(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return nt(this,e)}}function O(i){return function(t){if(Array.isArray(t))return Z(t)}(i)||function(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}(i)||function(t,e){if(t){if(typeof t=="string")return Z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(t,e):void 0}}(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Z(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=i[e];return n}function _(i){return Array.isArray?Array.isArray(i):Ut(i)==="[object Array]"}function j(i){return typeof i=="string"}function it(i){return typeof i=="number"}function de(i){return i===!0||i===!1||function(t){return Rt(t)&&t!==null}(i)&&Ut(i)=="[object Boolean]"}function Rt(i){return M(i)==="object"}function L(i){return i!=null}function gt(i){return!i.trim().length}function Ut(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}var fe=function(i){return"Invalid value for key ".concat(i)},me=function(i){return"Pattern length exceeds max of ".concat(i,".")},qt=Object.prototype.hasOwnProperty,pe=function(){function i(t){var e=this;s(this,i),this._keys=[],this._keyMap={};var n=0;t.forEach(function(r){var o=Kt(r);n+=o.weight,e._keys.push(o),e._keyMap[o.id]=o,n+=o.weight}),this._keys.forEach(function(r){r.weight/=n})}return d(i,[{key:"get",value:function(t){return this._keyMap[t]}},{key:"keys",value:function(){return this._keys}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),i}();function Kt(i){var t=null,e=null,n=null,r=1;if(j(i)||_(i))n=i,t=Nt(i),e=vt(i);else{if(!qt.call(i,"name"))throw new Error(function(c){return"Missing ".concat(c," property in key")}("name"));var o=i.name;if(n=o,qt.call(i,"weight")&&(r=i.weight)<=0)throw new Error(function(c){return"Property 'weight' in key '".concat(c,"' must be a positive integer")}(o));t=Nt(o),e=vt(o)}return{path:t,id:e,weight:r,src:n}}function Nt(i){return _(i)?i:i.split(".")}function vt(i){return _(i)?i.join("."):i}var v=X({},{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(i,t){return i.score===t.score?i.idx<t.idx?-1:1:i.score<t.score?-1:1}},{},{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},{},{location:0,threshold:.6,distance:100},{},{useExtendedSearch:!1,getFn:function(i,t){var e=[],n=!1;return function r(o,c,u){if(L(o))if(c[u]){var l=o[c[u]];if(!L(l))return;if(u===c.length-1&&(j(l)||it(l)||de(l)))e.push(function(f){return f==null?"":function(m){if(typeof m=="string")return m;var p=m+"";return p=="0"&&1/m==-1/0?"-0":p}(f)}(l));else if(_(l)){n=!0;for(var h=0,g=l.length;h<g;h+=1)r(l[h],c,u+1)}else c.length&&r(l,c,u+1)}else e.push(o)}(i,j(t)?t.split("."):t,0),n?e:e[0]},ignoreLocation:!1,ignoreFieldNorm:!1}),ge=/[^ ]+/g;function ve(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3,t=new Map,e=Math.pow(10,i);return{get:function(n){var r=n.match(ge).length;if(t.has(r))return t.get(r);var o=1/Math.sqrt(r),c=parseFloat(Math.round(o*e)/e);return t.set(r,c),c},clear:function(){t.clear()}}}var yt=function(){function i(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.getFn,n=e===void 0?v.getFn:e;s(this,i),this.norm=ve(3),this.getFn=n,this.isCreated=!1,this.setIndexRecords()}return d(i,[{key:"setSources",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.docs=t}},{key:"setIndexRecords",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.records=t}},{key:"setKeys",value:function(){var t=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.keys=e,this._keysMap={},e.forEach(function(n,r){t._keysMap[n.id]=r})}},{key:"create",value:function(){var t=this;!this.isCreated&&this.docs.length&&(this.isCreated=!0,j(this.docs[0])?this.docs.forEach(function(e,n){t._addString(e,n)}):this.docs.forEach(function(e,n){t._addObject(e,n)}),this.norm.clear())}},{key:"add",value:function(t){var e=this.size();j(t)?this._addString(t,e):this._addObject(t,e)}},{key:"removeAt",value:function(t){this.records.splice(t,1);for(var e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}},{key:"getValueForItemAtKeyId",value:function(t,e){return t[this._keysMap[e]]}},{key:"size",value:function(){return this.records.length}},{key:"_addString",value:function(t,e){if(L(t)&&!gt(t)){var n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}}},{key:"_addObject",value:function(t,e){var n=this,r={i:e,$:{}};this.keys.forEach(function(o,c){var u=n.getFn(t,o.path);if(L(u)){if(_(u))(function(){for(var h=[],g=[{nestedArrIndex:-1,value:u}];g.length;){var f=g.pop(),m=f.nestedArrIndex,p=f.value;if(L(p))if(j(p)&&!gt(p)){var y={v:p,i:m,n:n.norm.get(p)};h.push(y)}else _(p)&&p.forEach(function(b,w){g.push({nestedArrIndex:w,value:b})})}r.$[c]=h})();else if(!gt(u)){var l={v:u,n:n.norm.get(u)};r.$[c]=l}}}),this.records.push(r)}},{key:"toJSON",value:function(){return{keys:this.keys,records:this.records}}}]),i}();function Bt(i,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=e.getFn,r=n===void 0?v.getFn:n,o=new yt({getFn:r});return o.setKeys(i.map(Kt)),o.setSources(t),o.create(),o}function rt(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=t.errors,n=e===void 0?0:e,r=t.currentLocation,o=r===void 0?0:r,c=t.expectedLocation,u=c===void 0?0:c,l=t.distance,h=l===void 0?v.distance:l,g=t.ignoreLocation,f=g===void 0?v.ignoreLocation:g,m=n/i.length;if(f)return m;var p=Math.abs(u-o);return h?m+p/h:p?1:m}function ye(){for(var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v.minMatchCharLength,e=[],n=-1,r=-1,o=0,c=i.length;o<c;o+=1){var u=i[o];u&&n===-1?n=o:u||n===-1||((r=o-1)-n+1>=t&&e.push([n,r]),n=-1)}return i[o-1]&&o-n>=t&&e.push([n,o-1]),e}function ke(i){for(var t={},e=0,n=i.length;e<n;e+=1){var r=i.charAt(e);t[r]=(t[r]||0)|1<<n-e-1}return t}var Dt=function(){function i(t){var e=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.location,o=r===void 0?v.location:r,c=n.threshold,u=c===void 0?v.threshold:c,l=n.distance,h=l===void 0?v.distance:l,g=n.includeMatches,f=g===void 0?v.includeMatches:g,m=n.findAllMatches,p=m===void 0?v.findAllMatches:m,y=n.minMatchCharLength,b=y===void 0?v.minMatchCharLength:y,w=n.isCaseSensitive,I=w===void 0?v.isCaseSensitive:w,S=n.ignoreLocation,x=S===void 0?v.ignoreLocation:S;if(s(this,i),this.options={location:o,threshold:u,distance:h,includeMatches:f,findAllMatches:p,minMatchCharLength:b,isCaseSensitive:I,ignoreLocation:x},this.pattern=I?t:t.toLowerCase(),this.chunks=[],this.pattern.length){var F=function(U,It){e.chunks.push({pattern:U,alphabet:ke(U),startIndex:It})},E=this.pattern.length;if(E>32){for(var A=0,R=E%32,z=E-R;A<z;)F(this.pattern.substr(A,32),A),A+=32;if(R){var K=E-32;F(this.pattern.substr(K),K)}}else F(this.pattern,0)}}return d(i,[{key:"searchIn",value:function(t){var e=this.options,n=e.isCaseSensitive,r=e.includeMatches;if(n||(t=t.toLowerCase()),this.pattern===t){var o={isMatch:!0,score:0};return r&&(o.indices=[[0,t.length-1]]),o}var c=this.options,u=c.location,l=c.distance,h=c.threshold,g=c.findAllMatches,f=c.minMatchCharLength,m=c.ignoreLocation,p=[],y=0,b=!1;this.chunks.forEach(function(I){var S=I.pattern,x=I.alphabet,F=I.startIndex,E=function(K,U,It){var D=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Yt=D.location,Re=Yt===void 0?v.location:Yt,Zt=D.distance,st=Zt===void 0?v.distance:Zt,Jt=D.threshold,Ue=Jt===void 0?v.threshold:Jt,te=D.findAllMatches,qe=te===void 0?v.findAllMatches:te,ee=D.minMatchCharLength,ne=ee===void 0?v.minMatchCharLength:ee,ie=D.includeMatches,re=ie===void 0?v.includeMatches:ie,oe=D.ignoreLocation,at=oe===void 0?v.ignoreLocation:oe;if(U.length>32)throw new Error(me(32));for(var ct,V=U.length,tt=K.length,P=Math.max(0,Math.min(Re,tt)),G=Ue,W=P,ut=ne>1||re,St=ut?Array(tt):[];(ct=K.indexOf(U,W))>-1;){var Ke=rt(U,{currentLocation:ct,expectedLocation:P,distance:st,ignoreLocation:at});if(G=Math.min(Ke,G),W=ct+V,ut)for(var xt=0;xt<V;)St[ct+xt]=1,xt+=1}W=-1;for(var lt=[],Et=1,ht=V+tt,Ne=1<<V-1,H=0;H<V;H+=1){for(var dt=0,B=ht;dt<B;){var Be=rt(U,{errors:H,currentLocation:P+B,expectedLocation:P,distance:st,ignoreLocation:at});Be<=G?dt=B:ht=B,B=Math.floor((ht-dt)/2+dt)}ht=B;var se=Math.max(1,P-B+1),At=qe?tt:Math.min(P+B,tt)+V,Q=Array(At+2);Q[At+1]=(1<<H)-1;for(var q=At;q>=se;q-=1){var ft=q-1,ae=It[K.charAt(ft)];if(ut&&(St[ft]=+!!ae),Q[q]=(Q[q+1]<<1|1)&ae,H&&(Q[q]|=(lt[q+1]|lt[q])<<1|1|lt[q+1]),Q[q]&Ne&&(Et=rt(U,{errors:H,currentLocation:ft,expectedLocation:P,distance:st,ignoreLocation:at}))<=G){if(G=Et,(W=ft)<=P)break;se=Math.max(1,2*P-W)}}var De=rt(U,{errors:H+1,currentLocation:P,expectedLocation:P,distance:st,ignoreLocation:at});if(De>G)break;lt=Q}var Lt={isMatch:W>=0,score:Math.max(.001,Et)};if(ut){var ce=ye(St,ne);ce.length?re&&(Lt.indices=ce):Lt.isMatch=!1}return Lt}(t,S,x,{location:u+F,distance:l,threshold:h,findAllMatches:g,minMatchCharLength:f,includeMatches:r,ignoreLocation:m}),A=E.isMatch,R=E.score,z=E.indices;A&&(b=!0),y+=R,A&&z&&(p=[].concat(O(p),O(z)))});var w={isMatch:b,score:b?y/this.chunks.length:1};return b&&r&&(w.indices=p),w}}]),i}(),N=function(){function i(t){s(this,i),this.pattern=t}return d(i,[{key:"search",value:function(){}}],[{key:"isMultiMatch",value:function(t){return Ht(t,this.multiRegex)}},{key:"isSingleMatch",value:function(t){return Ht(t,this.singleRegex)}}]),i}();function Ht(i,t){var e=i.match(t);return e?e[1]:null}var be=function(i){$(e,i);var t=C(e);function e(n){return s(this,e),t.call(this,n)}return d(e,[{key:"search",value:function(n){var r=n===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"exact"}},{key:"multiRegex",get:function(){return/^="(.*)"$/}},{key:"singleRegex",get:function(){return/^=(.*)$/}}]),e}(N),we=function(i){$(e,i);var t=C(e);function e(n){return s(this,e),t.call(this,n)}return d(e,[{key:"search",value:function(n){var r=n.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,n.length-1]}}}],[{key:"type",get:function(){return"inverse-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"$/}},{key:"singleRegex",get:function(){return/^!(.*)$/}}]),e}(N),Me=function(i){$(e,i);var t=C(e);function e(n){return s(this,e),t.call(this,n)}return d(e,[{key:"search",value:function(n){var r=n.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"prefix-exact"}},{key:"multiRegex",get:function(){return/^\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^\^(.*)$/}}]),e}(N),Ie=function(i){$(e,i);var t=C(e);function e(n){return s(this,e),t.call(this,n)}return d(e,[{key:"search",value:function(n){var r=!n.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,n.length-1]}}}],[{key:"type",get:function(){return"inverse-prefix-exact"}},{key:"multiRegex",get:function(){return/^!\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^!\^(.*)$/}}]),e}(N),Se=function(i){$(e,i);var t=C(e);function e(n){return s(this,e),t.call(this,n)}return d(e,[{key:"search",value:function(n){var r=n.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[n.length-this.pattern.length,n.length-1]}}}],[{key:"type",get:function(){return"suffix-exact"}},{key:"multiRegex",get:function(){return/^"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^(.*)\$$/}}]),e}(N),xe=function(i){$(e,i);var t=C(e);function e(n){return s(this,e),t.call(this,n)}return d(e,[{key:"search",value:function(n){var r=!n.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,n.length-1]}}}],[{key:"type",get:function(){return"inverse-suffix-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^!(.*)\$$/}}]),e}(N),zt=function(i){$(e,i);var t=C(e);function e(n){var r,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=o.location,u=c===void 0?v.location:c,l=o.threshold,h=l===void 0?v.threshold:l,g=o.distance,f=g===void 0?v.distance:g,m=o.includeMatches,p=m===void 0?v.includeMatches:m,y=o.findAllMatches,b=y===void 0?v.findAllMatches:y,w=o.minMatchCharLength,I=w===void 0?v.minMatchCharLength:w,S=o.isCaseSensitive,x=S===void 0?v.isCaseSensitive:S,F=o.ignoreLocation,E=F===void 0?v.ignoreLocation:F;return s(this,e),(r=t.call(this,n))._bitapSearch=new Dt(n,{location:u,threshold:h,distance:f,includeMatches:p,findAllMatches:b,minMatchCharLength:I,isCaseSensitive:x,ignoreLocation:E}),r}return d(e,[{key:"search",value:function(n){return this._bitapSearch.searchIn(n)}}],[{key:"type",get:function(){return"fuzzy"}},{key:"multiRegex",get:function(){return/^"(.*)"$/}},{key:"singleRegex",get:function(){return/^(.*)$/}}]),e}(N),Vt=function(i){$(e,i);var t=C(e);function e(n){return s(this,e),t.call(this,n)}return d(e,[{key:"search",value:function(n){for(var r,o=0,c=[],u=this.pattern.length;(r=n.indexOf(this.pattern,o))>-1;)o=r+u,c.push([r,o-1]);var l=!!c.length;return{isMatch:l,score:l?0:1,indices:c}}}],[{key:"type",get:function(){return"include"}},{key:"multiRegex",get:function(){return/^'"(.*)"$/}},{key:"singleRegex",get:function(){return/^'(.*)$/}}]),e}(N),kt=[be,Vt,Me,Ie,xe,Se,we,zt],Gt=kt.length,Ee=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;function Ae(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i.split("|").map(function(e){for(var n=e.trim().split(Ee).filter(function(y){return y&&!!y.trim()}),r=[],o=0,c=n.length;o<c;o+=1){for(var u=n[o],l=!1,h=-1;!l&&++h<Gt;){var g=kt[h],f=g.isMultiMatch(u);f&&(r.push(new g(f,t)),l=!0)}if(!l)for(h=-1;++h<Gt;){var m=kt[h],p=m.isSingleMatch(u);if(p){r.push(new m(p,t));break}}}return r})}var Le=new Set([zt.type,Vt.type]),Fe=function(){function i(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.isCaseSensitive,r=n===void 0?v.isCaseSensitive:n,o=e.includeMatches,c=o===void 0?v.includeMatches:o,u=e.minMatchCharLength,l=u===void 0?v.minMatchCharLength:u,h=e.ignoreLocation,g=h===void 0?v.ignoreLocation:h,f=e.findAllMatches,m=f===void 0?v.findAllMatches:f,p=e.location,y=p===void 0?v.location:p,b=e.threshold,w=b===void 0?v.threshold:b,I=e.distance,S=I===void 0?v.distance:I;s(this,i),this.query=null,this.options={isCaseSensitive:r,includeMatches:c,minMatchCharLength:l,findAllMatches:m,ignoreLocation:g,location:y,threshold:w,distance:S},this.pattern=r?t:t.toLowerCase(),this.query=Ae(this.pattern,this.options)}return d(i,[{key:"searchIn",value:function(t){var e=this.query;if(!e)return{isMatch:!1,score:1};var n=this.options,r=n.includeMatches;t=n.isCaseSensitive?t:t.toLowerCase();for(var o=0,c=[],u=0,l=0,h=e.length;l<h;l+=1){var g=e[l];c.length=0,o=0;for(var f=0,m=g.length;f<m;f+=1){var p=g[f],y=p.search(t),b=y.isMatch,w=y.indices,I=y.score;if(!b){u=0,o=0,c.length=0;break}if(o+=1,u+=I,r){var S=p.constructor.type;Le.has(S)?c=[].concat(O(c),O(w)):c.push(w)}}if(o){var x={isMatch:!0,score:u/o};return r&&(x.indices=c),x}}return{isMatch:!1,score:1}}}],[{key:"condition",value:function(t,e){return e.useExtendedSearch}}]),i}(),ot=[];function bt(i,t){for(var e=0,n=ot.length;e<n;e+=1){var r=ot[e];if(r.condition(i,t))return new r(i,t)}return new Dt(i,t)}var wt="$and",Wt="$or",Qt="$path",Te="$val",Mt=function(i){return!(!i[wt]&&!i[Wt])},Ce=function(i){return!!i[Qt]},Oe=function(i){return!_(i)&&Rt(i)&&!Mt(i)},Xt=function(i){return k({},wt,Object.keys(i).map(function(t){return k({},t,i[t])}))};function _e(i,t){var e=t.ignoreFieldNorm,n=e===void 0?v.ignoreFieldNorm:e;i.forEach(function(r){var o=1;r.matches.forEach(function(c){var u=c.key,l=c.norm,h=c.score,g=u?u.weight:null;o*=Math.pow(h===0&&g?Number.EPSILON:h,(g||1)*(n?1:l))}),r.score=o})}function je(i,t){var e=i.matches;t.matches=[],L(e)&&e.forEach(function(n){if(L(n.indices)&&n.indices.length){var r={indices:n.indices,value:n.value};n.key&&(r.key=n.key.src),n.idx>-1&&(r.refIndex=n.idx),t.matches.push(r)}})}function Pe(i,t){t.score=i.score}function $e(i,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=e.includeMatches,r=n===void 0?v.includeMatches:n,o=e.includeScore,c=o===void 0?v.includeScore:o,u=[];return r&&u.push(je),c&&u.push(Pe),i.map(function(l){var h=l.idx,g={item:t[h],refIndex:h};return u.length&&u.forEach(function(f){f(l,g)}),g})}var J=function(){function i(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;s(this,i),this.options=X({},v,{},e),this.options.useExtendedSearch,this._keyStore=new pe(this.options.keys),this.setCollection(t,n)}return d(i,[{key:"setCollection",value:function(t,e){if(this._docs=t,e&&!(e instanceof yt))throw new Error("Incorrect 'index' type");this._myIndex=e||Bt(this.options.keys,this._docs,{getFn:this.options.getFn})}},{key:"add",value:function(t){L(t)&&(this._docs.push(t),this._myIndex.add(t))}},{key:"remove",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){return!1},e=[],n=0,r=this._docs.length;n<r;n+=1){var o=this._docs[n];t(o,n)&&(this.removeAt(n),n-=1,r-=1,e.push(o))}return e}},{key:"removeAt",value:function(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}},{key:"getIndex",value:function(){return this._myIndex}},{key:"search",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.limit,r=n===void 0?-1:n,o=this.options,c=o.includeMatches,u=o.includeScore,l=o.shouldSort,h=o.sortFn,g=o.ignoreFieldNorm,f=j(t)?j(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return _e(f,{ignoreFieldNorm:g}),l&&f.sort(h),it(r)&&r>-1&&(f=f.slice(0,r)),$e(f,this._docs,{includeMatches:c,includeScore:u})}},{key:"_searchStringList",value:function(t){var e=bt(t,this.options),n=this._myIndex.records,r=[];return n.forEach(function(o){var c=o.v,u=o.i,l=o.n;if(L(c)){var h=e.searchIn(c),g=h.isMatch,f=h.score,m=h.indices;g&&r.push({item:c,idx:u,matches:[{score:f,value:c,norm:l,indices:m}]})}}),r}},{key:"_searchLogical",value:function(t){var e=this,n=function(u,l){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},g=h.auto,f=g===void 0||g,m=function p(y){var b=Object.keys(y),w=Ce(y);if(!w&&b.length>1&&!Mt(y))return p(Xt(y));if(Oe(y)){var I=w?y[Qt]:b[0],S=w?y[Te]:y[I];if(!j(S))throw new Error(fe(I));var x={keyId:vt(I),pattern:S};return f&&(x.searcher=bt(S,l)),x}var F={children:[],operator:b[0]};return b.forEach(function(E){var A=y[E];_(A)&&A.forEach(function(R){F.children.push(p(R))})}),F};return Mt(u)||(u=Xt(u)),m(u)}(t,this.options),r=this._myIndex.records,o={},c=[];return r.forEach(function(u){var l=u.$,h=u.i;if(L(l)){var g=function f(m,p,y){if(!m.children){var b=m.keyId,w=m.searcher,I=e._findMatches({key:e._keyStore.get(b),value:e._myIndex.getValueForItemAtKeyId(p,b),searcher:w});return I&&I.length?[{idx:y,item:p,matches:I}]:[]}switch(m.operator){case wt:for(var S=[],x=0,F=m.children.length;x<F;x+=1){var E=f(m.children[x],p,y);if(!E.length)return[];S.push.apply(S,O(E))}return S;case Wt:for(var A=[],R=0,z=m.children.length;R<z;R+=1){var K=f(m.children[R],p,y);if(K.length){A.push.apply(A,O(K));break}}return A}}(n,l,h);g.length&&(o[h]||(o[h]={idx:h,item:l,matches:[]},c.push(o[h])),g.forEach(function(f){var m,p=f.matches;(m=o[h].matches).push.apply(m,O(p))}))}}),c}},{key:"_searchObjectList",value:function(t){var e=this,n=bt(t,this.options),r=this._myIndex,o=r.keys,c=r.records,u=[];return c.forEach(function(l){var h=l.$,g=l.i;if(L(h)){var f=[];o.forEach(function(m,p){f.push.apply(f,O(e._findMatches({key:m,value:h[p],searcher:n})))}),f.length&&u.push({idx:g,item:h,matches:f})}}),u}},{key:"_findMatches",value:function(t){var e=t.key,n=t.value,r=t.searcher;if(!L(n))return[];var o=[];if(_(n))n.forEach(function(m){var p=m.v,y=m.i,b=m.n;if(L(p)){var w=r.searchIn(p),I=w.isMatch,S=w.score,x=w.indices;I&&o.push({score:S,key:e,value:p,idx:y,norm:b,indices:x})}});else{var c=n.v,u=n.n,l=r.searchIn(c),h=l.isMatch,g=l.score,f=l.indices;h&&o.push({score:g,key:e,value:c,norm:u,indices:f})}return o}}]),i}();return J.version="6.4.6",J.createIndex=Bt,J.parseIndex=function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=t.getFn,n=e===void 0?v.getFn:e,r=i.keys,o=i.records,c=new yt({getFn:n});return c.setKeys(r),c.setIndexRecords(o),c},J.config=v,function(){ot.push.apply(ot,arguments)}(Fe),J},typeof Tt=="object"&&typeof Ct!="undefined"?Ct.exports=mt():typeof define=="function"&&define.amd?define(mt):(Ot=Ot||self).Fuse=mt()});var jt=Ze(ue());var _t=class{constructor(s,a,d){this.title=s,this.action=a,this.parentTitle=d}},pt=_t;var Pt=class{constructor(s,a){console.log("Initialising TurboAdmin"),this.options=a,this.paletteElement=document.getElementById("ta-command-palette-container"),this.paletteInputElement=document.getElementById("ta-command-palette-input"),this.paletteItemsElement=document.getElementById("ta-command-palette-items"),this.paletteData=s,this.paletteItems=this.buildPaletteItems(),this.selectedItem=this.paletteItems[0],this.updatePaletteItems(),this.navigating=!1,this.paletteFuseOptions=[],this.paletteFuse=null,typeof jt.default=="function"&&(this.paletteFuseOptions={keys:["innerText"]},this.paletteFuse=new jt.default(this.paletteItems,this.paletteFuseOptions),document.addEventListener("keydown",d=>this.handleGlobalKey(d)),this.paletteInputElement.addEventListener("keydown",d=>{this.paletteActions(d)}),this.paletteElement.addEventListener("click",d=>{this.checkForPaletteItemClick(d),this.checkForClickToClose(d)}))}isMac(){return navigator.platform.startsWith("Mac")}metaPressed(s){return this.isMac()?s.metaKey:s.ctrlKey}buildPaletteItems(){let s=[];return this.paletteData.forEach(a=>{let d=document.createElement("li"),k=document.createElement("a");d.appendChild(k),k.href=a.action;let T=a.title;a.parentTitle&&(T=a.parentTitle+": "+T),k.innerHTML=T,s.push(d)}),s}handleGlobalKey(s){this.shortcutKeysPressed(s)&&(this.paletteShown()?this.hidePalette():this.showPalette()),s.code==="Escape"&&this.paletteShown()&&this.hidePalette(),(s.code==="ArrowUp"||s.code==="ArrowDown"||s.code==="Enter")&&this.paletteShown()&&s.preventDefault()}shortcutKeysPressed(s){return this.options.shortcutKeys.reduce((d,k)=>d||!(navigator.platform.startsWith("Mac")&&k.meta&&!s.metaKey||k.alt&&!s.altKey||k.shift&&!s.shiftKey||k.ctrl&&!s.ctrlKey||"Key"+k.key.toUpperCase()!==s.code),!1)}paletteActions(s){if(s.code==="ArrowDown"&&this.paletteShown()){s.preventDefault(),this.moveDown();return}if(s.code==="ArrowUp"&&this.paletteShown()){s.preventDefault(),this.moveUp();return}s.code==="Enter"&&this.paletteShown()&&this.doAction(this.metaPressed(s)),this.paletteSearchAndUpdate()}showPalette(){this.paletteInputElement.value="",this.paletteElement?.classList.add("active"),this.paletteInputElement?.focus()}hidePalette(){this.navigating=!1,this.paletteElement?.classList.remove("active")}paletteShown(){return this.paletteElement?.classList.contains("active")}checkForPaletteItemClick(s){s.target.tagName==="A"&&(s.preventDefault(),this.selectedItem=s.target.closest("li"),this.setSelectedElement(),this.doAction(this.metaPressed(s)))}checkForClickToClose(s){s.target.id===this.paletteElement.id&&this.hidePalette()}setSelectedElement(){this.paletteItemsElement?.querySelectorAll("li.selected")?.forEach(s=>s.classList.remove("selected")),this.selectedItem&&(this.selectedItem.classList.add("selected"),this.scrollList())}scrollList(){this.selectedItem.offsetTop<this.paletteItemsElement.scrollTop&&(this.paletteItemsElement.scrollTop=this.selectedItem.offsetTop),this.selectedItem.offsetTop+this.selectedItem.offsetHeight>this.paletteItemsElement.offsetHeight+this.paletteItemsElement.scrollTop&&(this.paletteItemsElement.scrollTop=this.selectedItem.offsetTop+this.selectedItem.offsetHeight-this.paletteItemsElement.offsetHeight)}moveDown(){let s=this.selectedItem.nextElementSibling;this.navigating=!0,s&&(this.selectedItem=s,this.setSelectedElement())}moveUp(){let s=this.selectedItem.previousElementSibling;this.navigating=!0,s&&(this.selectedItem=s,this.setSelectedElement())}doAction(s=!1){this.hidePalette();let a=this.selectedItem.querySelector("a").href;s?window.open(a,"_blank"):window.location=this.selectedItem.querySelector("a").href}selectedItemDisplayed(){return Array.from(this.paletteItemsElement.childNodes).includes(this.selectedItem)}paletteSearchAndUpdate(){this.paletteSearch(),this.updatePaletteItems()}paletteSearch(){this.paletteItems=this.buildPaletteItems(),this.paletteInputElement.value!==""&&(this.paletteItems=this.paletteFuse.search(this.paletteInputElement.value).map(s=>s.item))}updatePaletteItems(){let s=document.createElement("ul");s.id="ta-command-palette-items",this.paletteItems.forEach(a=>{s.appendChild(a)}),this.paletteItemsElement.replaceChildren(...s.children),(!this.navigating||!this.selectedItemDisplayed())&&(this.selectedItem=this.paletteItems[0]),this.setSelectedElement()}},le=Pt;var $t=class{constructor(s){if(document.getElementById("ta-command-palette-container")){console.log("TurboAdmin already initialised - I won't make a second copy!");return}this.options=s,this.isBackend()?(this.siteUrl=window.location.href.match(/(^.*wp-admin)/)[1],this.home=document.getElementById("wp-admin-bar-site-name").querySelector("a").href):document.getElementById("wpadminbar")&&(this.siteUrl=document.getElementById("wp-admin-bar-dashboard").querySelector("a").href,this.home=null),this.menu=this.getMenu(),this.addAdditionalMenuItems(),this.menu=this.menu.concat(this.options.extraItemsRaw??[]),this.menu.sort((a,d)=>(a.parentTitle+a.title).localeCompare(d.parentTitle+d.title)),this.addPalette(),this.turboAdminPalette=new le(this.menu,this.options)}getMenu(){let s=[],a=document.getElementById("adminmenu");return a&&a.querySelectorAll("li.menu-top").forEach(k=>{let T=k.querySelector("a.menu-top"),X=T.querySelector(".wp-menu-name").innerHTML,$=T.href,Y="",et=new pt(X,$,Y);s.push(et);let nt=k.querySelector(".wp-submenu");if(!nt)return;let C=nt.querySelectorAll("li a");!C||C.forEach(O=>{let Z=X,_=O.innerHTML,j=O.href,it=new pt(_,j,Z);s.push(it)})}),s}isBackend(){return document.body.classList.contains("wp-admin")}addAdditionalMenuItems(){let s=this.options.extraItems??[];s=s.concat([{detectType:"dom",detectSelector:"body.wp-admin #wp-admin-bar-view-site a",itemTitleFunction:()=>"View/visit site",itemUrlFunction:a=>a.href},{detectType:"dom",detectSelector:"#wp-admin-bar-dashboard a",itemTitleFunction:a=>a.textContent,itemUrlFunction:a=>a.href},{detectType:"dom",detectSelector:"#wpadminbar",itemTitleFunction:()=>"Logout",itemUrlFunction:()=>document.getElementById("wp-admin-bar-logout")?.querySelector("a")?.href},{detectType:"dom",detectSelector:"#wp-admin-bar-edit a",itemTitleFunction:a=>a.textContent,itemUrlFunction:a=>a.href},{detectType:"dom",detectSelector:"#wp-admin-bar-view a",itemTitleFunction:a=>a.textContent,itemUrlFunction:a=>a.href},{detectType:"dom",detectSelector:"#wp-admin-bar-new-content .ab-submenu a",itemTitleFunction:a=>"New "+a.textContent,itemUrlFunction:a=>a.href},{detectType:"dom",detectSelector:"#wp-admin-bar-customize a",itemTitleFunction:a=>a.textContent,itemUrlFunction:a=>a.href},{detectType:"dom",detectSelectorNone:"#wpadminbar, #loginform",itemTitleFunction:()=>"Log in",itemUrlFunction:()=>document.querySelector('link[rel="https://api.w.org/"]')?.href?.replace("wp-json/","wp-admin/")},{detectType:"dom",detectSelector:"#backtoblog a",itemTitleFunction:()=>"View/visit site",itemUrlFunction:a=>a.href},{detectType:"dom",detectSelector:"#wp-admin-bar-my-sites #wp-admin-bar-network-admin > a",itemTitleFunction:()=>"Network Admin",itemUrlFunction:a=>a.href},{detectType:"dom",detectSelector:"#wp-admin-bar-my-sites #wp-admin-bar-network-admin .ab-submenu a",itemTitleFunction:a=>"Network Admin: "+a.textContent,itemUrlFunction:a=>a.href},{detectType:"dom",detectSelector:"#wp-admin-bar-my-sites #wp-admin-bar-my-sites-list .ab-submenu a",itemTitleFunction:a=>"Sites: "+a.closest(".menupop").querySelector("a").innerText+" - "+a.innerText,itemUrlFunction:a=>a.href}]),s.forEach(a=>{let d=!1,k=null;a.detectType==="url"?d=Boolean(window.location.href.includes(a.detectPattern)):a.detectType==="dom"&&(a.detectSelector?(k=document.querySelectorAll(a.detectSelector),d=Boolean(k)):a.detectSelectorNone&&(k=document.querySelectorAll(a.detectSelectorNone),d=k.length===0,k=document.querySelectorAll("body"))),!!d&&k.forEach(T=>{this.menu.push(new pt(a.itemTitleFunction(T),a.itemUrlFunction(T),""))})})}addPalette(){let s=document.createElement("div");s.id="ta-command-palette-container";let a=document.createElement("div");a.id="ta-command-palette";let d=document.createElement("input");d.id="ta-command-palette-input",d.name="ta-command-palette-input",d.type="text";let k=document.createElement("ul");k.id="ta-command-palette-items",s.appendChild(a),a.appendChild(d),a.appendChild(k),document.querySelector(this.options.appendToElement??"body").appendChild(s)}},he=$t;globalThis.turboAdmin=null;globalThis.turboAdminOptions={shortcutKeys:globalThis.wpTurboAdmin.keys};document.addEventListener("DOMContentLoaded",M=>{turboAdmin=new he(globalThis.turboAdminOptions)});})();
//# sourceMappingURL=main.min.js.map
