(()=>{var He=Object.create,At=Object.defineProperty,Ue=Object.getPrototypeOf,ze=Object.prototype.hasOwnProperty,Ve=Object.getOwnPropertyNames,We=Object.getOwnPropertyDescriptor;var Ge=I=>At(I,"__esModule",{value:!0});var Qe=(I,o)=>()=>(o||I((o={exports:{}}).exports,o),o.exports);var Xe=(I,o,M)=>{if(o&&typeof o=="object"||typeof o=="function")for(let g of Ve(o))!ze.call(I,g)&&g!=="default"&&At(I,g,{get:()=>o[g],enumerable:!(M=We(o,g))||M.enumerable});return I},Ye=I=>Xe(Ge(At(I!=null?He(Ue(I)):{},"default",I&&I.__esModule&&"default"in I?{get:()=>I.default,enumerable:!0}:{value:I,enumerable:!0})),I);var ce=Qe((Ot,_t)=>{var Ct,pt;Ct=Ot,pt=function(){"use strict";function I(r){return(I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function o(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function M(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function g(r,t,e){return t&&M(r.prototype,t),e&&M(r,e),r}function L(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function P(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function X(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?P(Object(e),!0).forEach(function(n){L(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):P(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function R(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&et(r,t)}function Y(r){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(r)}function et(r,t){return(et=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(r,t)}function nt(r,t){return!t||typeof t!="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r):t}function _(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,n=Y(r);if(t){var i=Y(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return nt(this,e)}}function C(r){return function(t){if(Array.isArray(t))return Z(t)}(r)||function(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}(r)||function(t,e){if(t){if(typeof t=="string")return Z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(t,e):void 0}}(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Z(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function j(r){return Array.isArray?Array.isArray(r):Tt(r)==="[object Array]"}function F(r){return typeof r=="string"}function rt(r){return typeof r=="number"}function le(r){return r===!0||r===!1||function(t){return Rt(t)&&t!==null}(r)&&Tt(r)=="[object Boolean]"}function Rt(r){return I(r)==="object"}function A(r){return r!=null}function mt(r){return!r.trim().length}function Tt(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}var de=function(r){return"Invalid value for key ".concat(r)},fe=function(r){return"Pattern length exceeds max of ".concat(r,".")},Kt=Object.prototype.hasOwnProperty,pe=function(){function r(t){var e=this;o(this,r),this._keys=[],this._keyMap={};var n=0;t.forEach(function(i){var s=Dt(i);n+=s.weight,e._keys.push(s),e._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(function(i){i.weight/=n})}return g(r,[{key:"get",value:function(t){return this._keyMap[t]}},{key:"keys",value:function(){return this._keys}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),r}();function Dt(r){var t=null,e=null,n=null,i=1;if(F(r)||j(r))n=r,t=qt(r),e=vt(r);else{if(!Kt.call(r,"name"))throw new Error(function(a){return"Missing ".concat(a," property in key")}("name"));var s=r.name;if(n=s,Kt.call(r,"weight")&&(i=r.weight)<=0)throw new Error(function(a){return"Property 'weight' in key '".concat(a,"' must be a positive integer")}(s));t=qt(s),e=vt(s)}return{path:t,id:e,weight:i,src:n}}function qt(r){return j(r)?r:r.split(".")}function vt(r){return j(r)?r.join("."):r}var m=X({},{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(r,t){return r.score===t.score?r.idx<t.idx?-1:1:r.score<t.score?-1:1}},{},{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},{},{location:0,threshold:.6,distance:100},{},{useExtendedSearch:!1,getFn:function(r,t){var e=[],n=!1;return function i(s,a,c){if(A(s))if(a[c]){var u=s[a[c]];if(!A(u))return;if(c===a.length-1&&(F(u)||rt(u)||le(u)))e.push(function(l){return l==null?"":function(d){if(typeof d=="string")return d;var f=d+"";return f=="0"&&1/d==-1/0?"-0":f}(l)}(u));else if(j(u)){n=!0;for(var h=0,p=u.length;h<p;h+=1)i(u[h],a,c+1)}else a.length&&i(u,a,c+1)}else e.push(s)}(r,F(t)?t.split("."):t,0),n?e:e[0]},ignoreLocation:!1,ignoreFieldNorm:!1}),me=/[^ ]+/g;function ve(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3,t=new Map,e=Math.pow(10,r);return{get:function(n){var i=n.match(me).length;if(t.has(i))return t.get(i);var s=1/Math.sqrt(i),a=parseFloat(Math.round(s*e)/e);return t.set(i,a),a},clear:function(){t.clear()}}}var gt=function(){function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.getFn,n=e===void 0?m.getFn:e;o(this,r),this.norm=ve(3),this.getFn=n,this.isCreated=!1,this.setIndexRecords()}return g(r,[{key:"setSources",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.docs=t}},{key:"setIndexRecords",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.records=t}},{key:"setKeys",value:function(){var t=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.keys=e,this._keysMap={},e.forEach(function(n,i){t._keysMap[n.id]=i})}},{key:"create",value:function(){var t=this;!this.isCreated&&this.docs.length&&(this.isCreated=!0,F(this.docs[0])?this.docs.forEach(function(e,n){t._addString(e,n)}):this.docs.forEach(function(e,n){t._addObject(e,n)}),this.norm.clear())}},{key:"add",value:function(t){var e=this.size();F(t)?this._addString(t,e):this._addObject(t,e)}},{key:"removeAt",value:function(t){this.records.splice(t,1);for(var e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}},{key:"getValueForItemAtKeyId",value:function(t,e){return t[this._keysMap[e]]}},{key:"size",value:function(){return this.records.length}},{key:"_addString",value:function(t,e){if(A(t)&&!mt(t)){var n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}}},{key:"_addObject",value:function(t,e){var n=this,i={i:e,$:{}};this.keys.forEach(function(s,a){var c=n.getFn(t,s.path);if(A(c)){if(j(c))(function(){for(var h=[],p=[{nestedArrIndex:-1,value:c}];p.length;){var l=p.pop(),d=l.nestedArrIndex,f=l.value;if(A(f))if(F(f)&&!mt(f)){var v={v:f,i:d,n:n.norm.get(f)};h.push(v)}else j(f)&&f.forEach(function(y,k){p.push({nestedArrIndex:k,value:y})})}i.$[a]=h})();else if(!mt(c)){var u={v:c,n:n.norm.get(c)};i.$[a]=u}}}),this.records.push(i)}},{key:"toJSON",value:function(){return{keys:this.keys,records:this.records}}}]),r}();function Nt(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=e.getFn,i=n===void 0?m.getFn:n,s=new gt({getFn:i});return s.setKeys(r.map(Dt)),s.setSources(t),s.create(),s}function it(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=t.errors,n=e===void 0?0:e,i=t.currentLocation,s=i===void 0?0:i,a=t.expectedLocation,c=a===void 0?0:a,u=t.distance,h=u===void 0?m.distance:u,p=t.ignoreLocation,l=p===void 0?m.ignoreLocation:p,d=n/r.length;if(l)return d;var f=Math.abs(c-s);return h?d+f/h:f?1:d}function ge(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.minMatchCharLength,e=[],n=-1,i=-1,s=0,a=r.length;s<a;s+=1){var c=r[s];c&&n===-1?n=s:c||n===-1||((i=s-1)-n+1>=t&&e.push([n,i]),n=-1)}return r[s-1]&&s-n>=t&&e.push([n,s-1]),e}function ye(r){for(var t={},e=0,n=r.length;e<n;e+=1){var i=r.charAt(e);t[i]=(t[i]||0)|1<<n-e-1}return t}var Bt=function(){function r(t){var e=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.location,s=i===void 0?m.location:i,a=n.threshold,c=a===void 0?m.threshold:a,u=n.distance,h=u===void 0?m.distance:u,p=n.includeMatches,l=p===void 0?m.includeMatches:p,d=n.findAllMatches,f=d===void 0?m.findAllMatches:d,v=n.minMatchCharLength,y=v===void 0?m.minMatchCharLength:v,k=n.isCaseSensitive,b=k===void 0?m.isCaseSensitive:k,w=n.ignoreLocation,E=w===void 0?m.ignoreLocation:w;if(o(this,r),this.options={location:s,threshold:c,distance:h,includeMatches:l,findAllMatches:f,minMatchCharLength:y,isCaseSensitive:b,ignoreLocation:E},this.pattern=b?t:t.toLowerCase(),this.chunks=[],this.pattern.length){var O=function(K,bt){e.chunks.push({pattern:K,alphabet:ye(K),startIndex:bt})},x=this.pattern.length;if(x>32){for(var S=0,T=x%32,z=x-T;S<z;)O(this.pattern.substr(S,32),S),S+=32;if(T){var q=x-32;O(this.pattern.substr(q),q)}}else O(this.pattern,0)}}return g(r,[{key:"searchIn",value:function(t){var e=this.options,n=e.isCaseSensitive,i=e.includeMatches;if(n||(t=t.toLowerCase()),this.pattern===t){var s={isMatch:!0,score:0};return i&&(s.indices=[[0,t.length-1]]),s}var a=this.options,c=a.location,u=a.distance,h=a.threshold,p=a.findAllMatches,l=a.minMatchCharLength,d=a.ignoreLocation,f=[],v=0,y=!1;this.chunks.forEach(function(b){var w=b.pattern,E=b.alphabet,O=b.startIndex,x=function(q,K,bt){var H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Xt=H.location,Re=Xt===void 0?m.location:Xt,Yt=H.distance,ot=Yt===void 0?m.distance:Yt,Zt=H.threshold,Te=Zt===void 0?m.threshold:Zt,Jt=H.findAllMatches,Ke=Jt===void 0?m.findAllMatches:Jt,te=H.minMatchCharLength,ee=te===void 0?m.minMatchCharLength:te,ne=H.includeMatches,re=ne===void 0?m.includeMatches:ne,ie=H.ignoreLocation,at=ie===void 0?m.ignoreLocation:ie;if(K.length>32)throw new Error(fe(32));for(var ct,V=K.length,tt=q.length,$=Math.max(0,Math.min(Re,tt)),W=Te,G=$,ut=ee>1||re,wt=ut?Array(tt):[];(ct=q.indexOf(K,G))>-1;){var De=it(K,{currentLocation:ct,expectedLocation:$,distance:ot,ignoreLocation:at});if(W=Math.min(De,W),G=ct+V,ut)for(var Et=0;Et<V;)wt[ct+Et]=1,Et+=1}G=-1;for(var ht=[],xt=1,lt=V+tt,qe=1<<V-1,U=0;U<V;U+=1){for(var dt=0,B=lt;dt<B;){var Ne=it(K,{errors:U,currentLocation:$+B,expectedLocation:$,distance:ot,ignoreLocation:at});Ne<=W?dt=B:lt=B,B=Math.floor((lt-dt)/2+dt)}lt=B;var se=Math.max(1,$-B+1),St=Ke?tt:Math.min($+B,tt)+V,Q=Array(St+2);Q[St+1]=(1<<U)-1;for(var D=St;D>=se;D-=1){var ft=D-1,oe=bt[q.charAt(ft)];if(ut&&(wt[ft]=+!!oe),Q[D]=(Q[D+1]<<1|1)&oe,U&&(Q[D]|=(ht[D+1]|ht[D])<<1|1|ht[D+1]),Q[D]&qe&&(xt=it(K,{errors:U,currentLocation:ft,expectedLocation:$,distance:ot,ignoreLocation:at}))<=W){if(W=xt,(G=ft)<=$)break;se=Math.max(1,2*$-G)}}var Be=it(K,{errors:U+1,currentLocation:$,expectedLocation:$,distance:ot,ignoreLocation:at});if(Be>W)break;ht=Q}var Lt={isMatch:G>=0,score:Math.max(.001,xt)};if(ut){var ae=ge(wt,ee);ae.length?re&&(Lt.indices=ae):Lt.isMatch=!1}return Lt}(t,w,E,{location:c+O,distance:u,threshold:h,findAllMatches:p,minMatchCharLength:l,includeMatches:i,ignoreLocation:d}),S=x.isMatch,T=x.score,z=x.indices;S&&(y=!0),v+=T,S&&z&&(f=[].concat(C(f),C(z)))});var k={isMatch:y,score:y?v/this.chunks.length:1};return y&&i&&(k.indices=f),k}}]),r}(),N=function(){function r(t){o(this,r),this.pattern=t}return g(r,[{key:"search",value:function(){}}],[{key:"isMultiMatch",value:function(t){return Ht(t,this.multiRegex)}},{key:"isSingleMatch",value:function(t){return Ht(t,this.singleRegex)}}]),r}();function Ht(r,t){var e=r.match(t);return e?e[1]:null}var ke=function(r){R(e,r);var t=_(e);function e(n){return o(this,e),t.call(this,n)}return g(e,[{key:"search",value:function(n){var i=n===this.pattern;return{isMatch:i,score:i?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"exact"}},{key:"multiRegex",get:function(){return/^="(.*)"$/}},{key:"singleRegex",get:function(){return/^=(.*)$/}}]),e}(N),Me=function(r){R(e,r);var t=_(e);function e(n){return o(this,e),t.call(this,n)}return g(e,[{key:"search",value:function(n){var i=n.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,n.length-1]}}}],[{key:"type",get:function(){return"inverse-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"$/}},{key:"singleRegex",get:function(){return/^!(.*)$/}}]),e}(N),Ie=function(r){R(e,r);var t=_(e);function e(n){return o(this,e),t.call(this,n)}return g(e,[{key:"search",value:function(n){var i=n.startsWith(this.pattern);return{isMatch:i,score:i?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"prefix-exact"}},{key:"multiRegex",get:function(){return/^\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^\^(.*)$/}}]),e}(N),be=function(r){R(e,r);var t=_(e);function e(n){return o(this,e),t.call(this,n)}return g(e,[{key:"search",value:function(n){var i=!n.startsWith(this.pattern);return{isMatch:i,score:i?0:1,indices:[0,n.length-1]}}}],[{key:"type",get:function(){return"inverse-prefix-exact"}},{key:"multiRegex",get:function(){return/^!\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^!\^(.*)$/}}]),e}(N),we=function(r){R(e,r);var t=_(e);function e(n){return o(this,e),t.call(this,n)}return g(e,[{key:"search",value:function(n){var i=n.endsWith(this.pattern);return{isMatch:i,score:i?0:1,indices:[n.length-this.pattern.length,n.length-1]}}}],[{key:"type",get:function(){return"suffix-exact"}},{key:"multiRegex",get:function(){return/^"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^(.*)\$$/}}]),e}(N),Ee=function(r){R(e,r);var t=_(e);function e(n){return o(this,e),t.call(this,n)}return g(e,[{key:"search",value:function(n){var i=!n.endsWith(this.pattern);return{isMatch:i,score:i?0:1,indices:[0,n.length-1]}}}],[{key:"type",get:function(){return"inverse-suffix-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^!(.*)\$$/}}]),e}(N),Ut=function(r){R(e,r);var t=_(e);function e(n){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.location,c=a===void 0?m.location:a,u=s.threshold,h=u===void 0?m.threshold:u,p=s.distance,l=p===void 0?m.distance:p,d=s.includeMatches,f=d===void 0?m.includeMatches:d,v=s.findAllMatches,y=v===void 0?m.findAllMatches:v,k=s.minMatchCharLength,b=k===void 0?m.minMatchCharLength:k,w=s.isCaseSensitive,E=w===void 0?m.isCaseSensitive:w,O=s.ignoreLocation,x=O===void 0?m.ignoreLocation:O;return o(this,e),(i=t.call(this,n))._bitapSearch=new Bt(n,{location:c,threshold:h,distance:l,includeMatches:f,findAllMatches:y,minMatchCharLength:b,isCaseSensitive:E,ignoreLocation:x}),i}return g(e,[{key:"search",value:function(n){return this._bitapSearch.searchIn(n)}}],[{key:"type",get:function(){return"fuzzy"}},{key:"multiRegex",get:function(){return/^"(.*)"$/}},{key:"singleRegex",get:function(){return/^(.*)$/}}]),e}(N),zt=function(r){R(e,r);var t=_(e);function e(n){return o(this,e),t.call(this,n)}return g(e,[{key:"search",value:function(n){for(var i,s=0,a=[],c=this.pattern.length;(i=n.indexOf(this.pattern,s))>-1;)s=i+c,a.push([i,s-1]);var u=!!a.length;return{isMatch:u,score:u?0:1,indices:a}}}],[{key:"type",get:function(){return"include"}},{key:"multiRegex",get:function(){return/^'"(.*)"$/}},{key:"singleRegex",get:function(){return/^'(.*)$/}}]),e}(N),yt=[ke,zt,Ie,be,Ee,we,Me,Ut],Vt=yt.length,xe=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;function Se(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return r.split("|").map(function(e){for(var n=e.trim().split(xe).filter(function(v){return v&&!!v.trim()}),i=[],s=0,a=n.length;s<a;s+=1){for(var c=n[s],u=!1,h=-1;!u&&++h<Vt;){var p=yt[h],l=p.isMultiMatch(c);l&&(i.push(new p(l,t)),u=!0)}if(!u)for(h=-1;++h<Vt;){var d=yt[h],f=d.isSingleMatch(c);if(f){i.push(new d(f,t));break}}}return i})}var Le=new Set([Ut.type,zt.type]),Ae=function(){function r(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.isCaseSensitive,i=n===void 0?m.isCaseSensitive:n,s=e.includeMatches,a=s===void 0?m.includeMatches:s,c=e.minMatchCharLength,u=c===void 0?m.minMatchCharLength:c,h=e.ignoreLocation,p=h===void 0?m.ignoreLocation:h,l=e.findAllMatches,d=l===void 0?m.findAllMatches:l,f=e.location,v=f===void 0?m.location:f,y=e.threshold,k=y===void 0?m.threshold:y,b=e.distance,w=b===void 0?m.distance:b;o(this,r),this.query=null,this.options={isCaseSensitive:i,includeMatches:a,minMatchCharLength:u,findAllMatches:d,ignoreLocation:p,location:v,threshold:k,distance:w},this.pattern=i?t:t.toLowerCase(),this.query=Se(this.pattern,this.options)}return g(r,[{key:"searchIn",value:function(t){var e=this.query;if(!e)return{isMatch:!1,score:1};var n=this.options,i=n.includeMatches;t=n.isCaseSensitive?t:t.toLowerCase();for(var s=0,a=[],c=0,u=0,h=e.length;u<h;u+=1){var p=e[u];a.length=0,s=0;for(var l=0,d=p.length;l<d;l+=1){var f=p[l],v=f.search(t),y=v.isMatch,k=v.indices,b=v.score;if(!y){c=0,s=0,a.length=0;break}if(s+=1,c+=b,i){var w=f.constructor.type;Le.has(w)?a=[].concat(C(a),C(k)):a.push(k)}}if(s){var E={isMatch:!0,score:c/s};return i&&(E.indices=a),E}}return{isMatch:!1,score:1}}}],[{key:"condition",value:function(t,e){return e.useExtendedSearch}}]),r}(),st=[];function kt(r,t){for(var e=0,n=st.length;e<n;e+=1){var i=st[e];if(i.condition(r,t))return new i(r,t)}return new Bt(r,t)}var Mt="$and",Wt="$or",Gt="$path",Oe="$val",It=function(r){return!(!r[Mt]&&!r[Wt])},_e=function(r){return!!r[Gt]},Ce=function(r){return!j(r)&&Rt(r)&&!It(r)},Qt=function(r){return L({},Mt,Object.keys(r).map(function(t){return L({},t,r[t])}))};function je(r,t){var e=t.ignoreFieldNorm,n=e===void 0?m.ignoreFieldNorm:e;r.forEach(function(i){var s=1;i.matches.forEach(function(a){var c=a.key,u=a.norm,h=a.score,p=c?c.weight:null;s*=Math.pow(h===0&&p?Number.EPSILON:h,(p||1)*(n?1:u))}),i.score=s})}function Fe(r,t){var e=r.matches;t.matches=[],A(e)&&e.forEach(function(n){if(A(n.indices)&&n.indices.length){var i={indices:n.indices,value:n.value};n.key&&(i.key=n.key.src),n.idx>-1&&(i.refIndex=n.idx),t.matches.push(i)}})}function $e(r,t){t.score=r.score}function Pe(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=e.includeMatches,i=n===void 0?m.includeMatches:n,s=e.includeScore,a=s===void 0?m.includeScore:s,c=[];return i&&c.push(Fe),a&&c.push($e),r.map(function(u){var h=u.idx,p={item:t[h],refIndex:h};return c.length&&c.forEach(function(l){l(u,p)}),p})}var J=function(){function r(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;o(this,r),this.options=X({},m,{},e),this.options.useExtendedSearch,this._keyStore=new pe(this.options.keys),this.setCollection(t,n)}return g(r,[{key:"setCollection",value:function(t,e){if(this._docs=t,e&&!(e instanceof gt))throw new Error("Incorrect 'index' type");this._myIndex=e||Nt(this.options.keys,this._docs,{getFn:this.options.getFn})}},{key:"add",value:function(t){A(t)&&(this._docs.push(t),this._myIndex.add(t))}},{key:"remove",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){return!1},e=[],n=0,i=this._docs.length;n<i;n+=1){var s=this._docs[n];t(s,n)&&(this.removeAt(n),n-=1,i-=1,e.push(s))}return e}},{key:"removeAt",value:function(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}},{key:"getIndex",value:function(){return this._myIndex}},{key:"search",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.limit,i=n===void 0?-1:n,s=this.options,a=s.includeMatches,c=s.includeScore,u=s.shouldSort,h=s.sortFn,p=s.ignoreFieldNorm,l=F(t)?F(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return je(l,{ignoreFieldNorm:p}),u&&l.sort(h),rt(i)&&i>-1&&(l=l.slice(0,i)),Pe(l,this._docs,{includeMatches:a,includeScore:c})}},{key:"_searchStringList",value:function(t){var e=kt(t,this.options),n=this._myIndex.records,i=[];return n.forEach(function(s){var a=s.v,c=s.i,u=s.n;if(A(a)){var h=e.searchIn(a),p=h.isMatch,l=h.score,d=h.indices;p&&i.push({item:a,idx:c,matches:[{score:l,value:a,norm:u,indices:d}]})}}),i}},{key:"_searchLogical",value:function(t){var e=this,n=function(c,u){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},p=h.auto,l=p===void 0||p,d=function f(v){var y=Object.keys(v),k=_e(v);if(!k&&y.length>1&&!It(v))return f(Qt(v));if(Ce(v)){var b=k?v[Gt]:y[0],w=k?v[Oe]:v[b];if(!F(w))throw new Error(de(b));var E={keyId:vt(b),pattern:w};return l&&(E.searcher=kt(w,u)),E}var O={children:[],operator:y[0]};return y.forEach(function(x){var S=v[x];j(S)&&S.forEach(function(T){O.children.push(f(T))})}),O};return It(c)||(c=Qt(c)),d(c)}(t,this.options),i=this._myIndex.records,s={},a=[];return i.forEach(function(c){var u=c.$,h=c.i;if(A(u)){var p=function l(d,f,v){if(!d.children){var y=d.keyId,k=d.searcher,b=e._findMatches({key:e._keyStore.get(y),value:e._myIndex.getValueForItemAtKeyId(f,y),searcher:k});return b&&b.length?[{idx:v,item:f,matches:b}]:[]}switch(d.operator){case Mt:for(var w=[],E=0,O=d.children.length;E<O;E+=1){var x=l(d.children[E],f,v);if(!x.length)return[];w.push.apply(w,C(x))}return w;case Wt:for(var S=[],T=0,z=d.children.length;T<z;T+=1){var q=l(d.children[T],f,v);if(q.length){S.push.apply(S,C(q));break}}return S}}(n,u,h);p.length&&(s[h]||(s[h]={idx:h,item:u,matches:[]},a.push(s[h])),p.forEach(function(l){var d,f=l.matches;(d=s[h].matches).push.apply(d,C(f))}))}}),a}},{key:"_searchObjectList",value:function(t){var e=this,n=kt(t,this.options),i=this._myIndex,s=i.keys,a=i.records,c=[];return a.forEach(function(u){var h=u.$,p=u.i;if(A(h)){var l=[];s.forEach(function(d,f){l.push.apply(l,C(e._findMatches({key:d,value:h[f],searcher:n})))}),l.length&&c.push({idx:p,item:h,matches:l})}}),c}},{key:"_findMatches",value:function(t){var e=t.key,n=t.value,i=t.searcher;if(!A(n))return[];var s=[];if(j(n))n.forEach(function(d){var f=d.v,v=d.i,y=d.n;if(A(f)){var k=i.searchIn(f),b=k.isMatch,w=k.score,E=k.indices;b&&s.push({score:w,key:e,value:f,idx:v,norm:y,indices:E})}});else{var a=n.v,c=n.n,u=i.searchIn(a),h=u.isMatch,p=u.score,l=u.indices;h&&s.push({score:p,key:e,value:a,norm:c,indices:l})}return s}}]),r}();return J.version="6.4.6",J.createIndex=Nt,J.parseIndex=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=t.getFn,n=e===void 0?m.getFn:e,i=r.keys,s=r.records,a=new gt({getFn:n});return a.setKeys(i),a.setIndexRecords(s),a},J.config=m,function(){st.push.apply(st,arguments)}(Ae),J},typeof Ot=="object"&&typeof _t!="undefined"?_t.exports=pt():typeof define=="function"&&define.amd?define(pt):(Ct=Ct||self).Fuse=pt()});var jt=Ye(ce()),Ft=class{constructor(o){console.log("Initialising TurboAdmin"),this.paletteElement=document.getElementById("ta-command-palette-container"),this.paletteInputElement=document.getElementById("ta-command-palette-input"),this.paletteItemsElement=document.getElementById("ta-command-palette-items"),this.paletteData=o,this.paletteItems=this.buildPaletteItems(),this.selectedItem=this.paletteItems[0],this.updatePaletteItems(),this.paletteFuseOptions=[],this.paletteFuse=null,typeof jt.default=="function"&&(this.paletteFuseOptions={keys:["innerText"]},this.paletteFuse=new jt.default(this.paletteItems,this.paletteFuseOptions),document.addEventListener("keydown",M=>this.handleGlobalKey(M)),this.paletteInputElement.addEventListener("keyup",M=>{this.paletteActions(M)}))}buildPaletteItems(){let o=[];return this.paletteData.forEach(M=>{let g=document.createElement("li"),L=document.createElement("a");g.appendChild(L),L.href=M.action;let P=M.title;M.parentTitle&&(P=M.parentTitle+": "+P),L.innerHTML=P,o.push(g)}),o}handleGlobalKey(o){console.log(o.code),o.code==="KeyP"&&this.metaKeysPressed(o)&&this.showPalette(),o.code==="Escape"&&this.paletteShown()&&this.hidePalette(),(o.code==="ArrowUp"||o.code==="ArrowDown"||o.code==="Enter")&&this.paletteShown()&&o.preventDefault()}paletteActions(o){if(o.code==="ArrowDown"&&this.paletteShown()){o.preventDefault(),this.moveDown();return}if(o.code==="ArrowUp"&&this.paletteShown()){o.preventDefault(),this.moveUp();return}o.code==="Enter"&&this.paletteShown()&&this.doAction(),this.paletteSearchAndUpdate()}metaKeysPressed(o){return navigator.platform.startsWith("Mac")?o.metaKey&&o.shiftKey&&o.altKey:o.ctrlKey&&o.shiftKey&&o.altKey}showPalette(){this.paletteInputElement.value="",this.paletteElement?.classList.add("active"),this.paletteInputElement?.focus()}hidePalette(){this.paletteElement?.classList.remove("active")}paletteShown(){return this.paletteElement?.classList.contains("active")}setSelectedElement(){this.paletteItemsElement?.querySelectorAll("li.selected")?.forEach(o=>o.classList.remove("selected")),this.selectedItem&&(this.selectedItem.classList.add("selected"),this.scrollList())}scrollList(){this.selectedItem.offsetTop<this.paletteItemsElement.scrollTop&&(this.paletteItemsElement.scrollTop=this.selectedItem.offsetTop),this.selectedItem.offsetTop+this.selectedItem.offsetHeight>this.paletteItemsElement.offsetHeight+this.paletteItemsElement.scrollTop&&(this.paletteItemsElement.scrollTop=this.selectedItem.offsetTop+this.selectedItem.offsetHeight-this.paletteItemsElement.offsetHeight)}moveDown(){let o=this.selectedItem.nextElementSibling;o&&(this.selectedItem=o,this.setSelectedElement())}moveUp(){let o=this.selectedItem.previousElementSibling;o&&(this.selectedItem=o,this.setSelectedElement())}doAction(){this.hidePalette(),this.selectedItem.querySelector("a").click()}selectedItemDisplayed(){return Array.from(this.paletteItemsElement.childNodes).includes(this.selectedItem)}paletteSearchAndUpdate(){this.paletteSearch(),this.updatePaletteItems()}paletteSearch(){this.paletteItems=this.buildPaletteItems(),this.paletteInputElement.value!==""&&(this.paletteItems=this.paletteFuse.search(this.paletteInputElement.value).map(o=>o.item))}updatePaletteItems(){let o=document.createElement("ul");o.id="ta-command-palette-items",this.paletteItems.forEach(M=>{o.appendChild(M)}),this.paletteItemsElement.replaceChildren(...o.children),this.selectedItemDisplayed()||(this.selectedItem=this.paletteItems[0]),this.setSelectedElement()}},ue=Ft;var $t=class{constructor(o,M,g){this.title=o,this.action=M,this.parentTitle=g}},Pt=$t;var he=class{constructor(){this.menu=this.getMenu(),this.addPalette(),this.turboAdmin=new ue(this.menu)}getMenu(){let o=[];return document.getElementById("adminmenu").querySelectorAll("li.menu-top").forEach(L=>{let P=L.querySelector("a.menu-top"),X=P.querySelector(".wp-menu-name").innerHTML,R=P.href,Y="",et=new Pt(X,R,Y);o.push(et);let nt=L.querySelector(".wp-submenu");if(!nt)return;let _=nt.querySelectorAll("li a");!_||_.forEach(C=>{let Z=X,j=C.innerHTML,F=C.href,rt=new Pt(j,F,Z);o.push(rt)})}),o}addPalette(){let o=document.createElement("div");o.id="ta-command-palette-container";let M=document.createElement("div");M.id="ta-command-palette";let g=document.createElement("input");g.id="ta-command-palette-input",g.name="ta-command-palette-input",g.type="text";let L=document.createElement("ul");L.id="ta-command-palette-items",o.appendChild(M),M.appendChild(g),M.appendChild(L),document.getElementById("wpwrap").appendChild(o)}},Ze=null;document.addEventListener("DOMContentLoaded",I=>{Ze=new he});})();
//# sourceMappingURL=main.min.js.map
