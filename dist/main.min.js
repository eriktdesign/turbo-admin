(()=>{var Ht=Object.create,Oe=Object.defineProperty,zt=Object.getPrototypeOf,Vt=Object.prototype.hasOwnProperty,Gt=Object.getOwnPropertyNames,Qt=Object.getOwnPropertyDescriptor;var Wt=I=>Oe(I,"__esModule",{value:!0});var Xt=(I,s)=>()=>(s||I((s={exports:{}}).exports,s),s.exports);var Yt=(I,s,h)=>{if(s&&typeof s=="object"||typeof s=="function")for(let p of Gt(s))!Vt.call(I,p)&&p!=="default"&&Oe(I,p,{get:()=>s[p],enumerable:!(h=Qt(s,p))||h.enumerable});return I},Zt=I=>Yt(Wt(Oe(I!=null?Ht(zt(I)):{},"default",I&&I.__esModule&&"default"in I?{get:()=>I.default,enumerable:!0}:{value:I,enumerable:!0})),I);var ut=Xt((Ce,_e)=>{var Fe,me;Fe=Ce,me=function(){"use strict";function I(r){return(I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function s(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function h(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function p(r,e,t){return e&&h(r.prototype,e),t&&h(r,t),r}function k(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function q(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function X(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?q(Object(t),!0).forEach(function(n){k(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):q(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function P(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&te(r,e)}function Y(r){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(r)}function te(r,e){return(te=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(r,e)}function ne(r,e){return!e||typeof e!="object"&&typeof e!="function"?function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r):e}function C(r){var e=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,n=Y(r);if(e){var i=Y(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return ne(this,t)}}function _(r){return function(e){if(Array.isArray(e))return Z(e)}(r)||function(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}(r)||function(e,t){if(e){if(typeof e=="string")return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Z(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function F(r){return Array.isArray?Array.isArray(r):Ue(r)==="[object Array]"}function T(r){return typeof r=="string"}function re(r){return typeof r=="number"}function dt(r){return r===!0||r===!1||function(e){return Re(e)&&e!==null}(r)&&Ue(r)=="[object Boolean]"}function Re(r){return I(r)==="object"}function A(r){return r!=null}function ge(r){return!r.trim().length}function Ue(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}var ft=function(r){return"Invalid value for key ".concat(r)},mt=function(r){return"Pattern length exceeds max of ".concat(r,".")},qe=Object.prototype.hasOwnProperty,pt=function(){function r(e){var t=this;s(this,r),this._keys=[],this._keyMap={};var n=0;e.forEach(function(i){var o=Be(i);n+=o.weight,t._keys.push(o),t._keyMap[o.id]=o,n+=o.weight}),this._keys.forEach(function(i){i.weight/=n})}return p(r,[{key:"get",value:function(e){return this._keyMap[e]}},{key:"keys",value:function(){return this._keys}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),r}();function Be(r){var e=null,t=null,n=null,i=1;if(T(r)||F(r))n=r,e=Ke(r),t=ve(r);else{if(!qe.call(r,"name"))throw new Error(function(a){return"Missing ".concat(a," property in key")}("name"));var o=r.name;if(n=o,qe.call(r,"weight")&&(i=r.weight)<=0)throw new Error(function(a){return"Property 'weight' in key '".concat(a,"' must be a positive integer")}(o));e=Ke(o),t=ve(o)}return{path:e,id:t,weight:i,src:n}}function Ke(r){return F(r)?r:r.split(".")}function ve(r){return F(r)?r.join("."):r}var v=X({},{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(r,e){return r.score===e.score?r.idx<e.idx?-1:1:r.score<e.score?-1:1}},{},{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},{},{location:0,threshold:.6,distance:100},{},{useExtendedSearch:!1,getFn:function(r,e){var t=[],n=!1;return function i(o,a,c){if(A(o))if(a[c]){var u=o[a[c]];if(!A(u))return;if(c===a.length-1&&(T(u)||re(u)||dt(u)))t.push(function(d){return d==null?"":function(f){if(typeof f=="string")return f;var m=f+"";return m=="0"&&1/f==-1/0?"-0":m}(d)}(u));else if(F(u)){n=!0;for(var l=0,g=u.length;l<g;l+=1)i(u[l],a,c+1)}else a.length&&i(u,a,c+1)}else t.push(o)}(r,T(e)?e.split("."):e,0),n?t:t[0]},ignoreLocation:!1,ignoreFieldNorm:!1}),gt=/[^ ]+/g;function vt(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3,e=new Map,t=Math.pow(10,r);return{get:function(n){var i=n.match(gt).length;if(e.has(i))return e.get(i);var o=1/Math.sqrt(i),a=parseFloat(Math.round(o*t)/t);return e.set(i,a),a},clear:function(){e.clear()}}}var ye=function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.getFn,n=t===void 0?v.getFn:t;s(this,r),this.norm=vt(3),this.getFn=n,this.isCreated=!1,this.setIndexRecords()}return p(r,[{key:"setSources",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.docs=e}},{key:"setIndexRecords",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.records=e}},{key:"setKeys",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.keys=t,this._keysMap={},t.forEach(function(n,i){e._keysMap[n.id]=i})}},{key:"create",value:function(){var e=this;!this.isCreated&&this.docs.length&&(this.isCreated=!0,T(this.docs[0])?this.docs.forEach(function(t,n){e._addString(t,n)}):this.docs.forEach(function(t,n){e._addObject(t,n)}),this.norm.clear())}},{key:"add",value:function(e){var t=this.size();T(e)?this._addString(e,t):this._addObject(e,t)}},{key:"removeAt",value:function(e){this.records.splice(e,1);for(var t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}},{key:"getValueForItemAtKeyId",value:function(e,t){return e[this._keysMap[t]]}},{key:"size",value:function(){return this.records.length}},{key:"_addString",value:function(e,t){if(A(e)&&!ge(e)){var n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}}},{key:"_addObject",value:function(e,t){var n=this,i={i:t,$:{}};this.keys.forEach(function(o,a){var c=n.getFn(e,o.path);if(A(c)){if(F(c))(function(){for(var l=[],g=[{nestedArrIndex:-1,value:c}];g.length;){var d=g.pop(),f=d.nestedArrIndex,m=d.value;if(A(m))if(T(m)&&!ge(m)){var y={v:m,i:f,n:n.norm.get(m)};l.push(y)}else F(m)&&m.forEach(function(b,M){g.push({nestedArrIndex:M,value:b})})}i.$[a]=l})();else if(!ge(c)){var u={v:c,n:n.norm.get(c)};i.$[a]=u}}}),this.records.push(i)}},{key:"toJSON",value:function(){return{keys:this.keys,records:this.records}}}]),r}();function De(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.getFn,i=n===void 0?v.getFn:n,o=new ye({getFn:i});return o.setKeys(r.map(Be)),o.setSources(e),o.create(),o}function ie(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.errors,n=t===void 0?0:t,i=e.currentLocation,o=i===void 0?0:i,a=e.expectedLocation,c=a===void 0?0:a,u=e.distance,l=u===void 0?v.distance:u,g=e.ignoreLocation,d=g===void 0?v.ignoreLocation:g,f=n/r.length;if(d)return f;var m=Math.abs(c-o);return l?f+m/l:m?1:f}function yt(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v.minMatchCharLength,t=[],n=-1,i=-1,o=0,a=r.length;o<a;o+=1){var c=r[o];c&&n===-1?n=o:c||n===-1||((i=o-1)-n+1>=e&&t.push([n,i]),n=-1)}return r[o-1]&&o-n>=e&&t.push([n,o-1]),t}function kt(r){for(var e={},t=0,n=r.length;t<n;t+=1){var i=r.charAt(t);e[i]=(e[i]||0)|1<<n-t-1}return e}var Ne=function(){function r(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.location,o=i===void 0?v.location:i,a=n.threshold,c=a===void 0?v.threshold:a,u=n.distance,l=u===void 0?v.distance:u,g=n.includeMatches,d=g===void 0?v.includeMatches:g,f=n.findAllMatches,m=f===void 0?v.findAllMatches:f,y=n.minMatchCharLength,b=y===void 0?v.minMatchCharLength:y,M=n.isCaseSensitive,w=M===void 0?v.isCaseSensitive:M,S=n.ignoreLocation,E=S===void 0?v.ignoreLocation:S;if(s(this,r),this.options={location:o,threshold:c,distance:l,includeMatches:d,findAllMatches:m,minMatchCharLength:b,isCaseSensitive:w,ignoreLocation:E},this.pattern=w?e:e.toLowerCase(),this.chunks=[],this.pattern.length){var O=function(R,we){t.chunks.push({pattern:R,alphabet:kt(R),startIndex:we})},x=this.pattern.length;if(x>32){for(var L=0,$=x%32,z=x-$;L<z;)O(this.pattern.substr(L,32),L),L+=32;if($){var B=x-32;O(this.pattern.substr(B),B)}}else O(this.pattern,0)}}return p(r,[{key:"searchIn",value:function(e){var t=this.options,n=t.isCaseSensitive,i=t.includeMatches;if(n||(e=e.toLowerCase()),this.pattern===e){var o={isMatch:!0,score:0};return i&&(o.indices=[[0,e.length-1]]),o}var a=this.options,c=a.location,u=a.distance,l=a.threshold,g=a.findAllMatches,d=a.minMatchCharLength,f=a.ignoreLocation,m=[],y=0,b=!1;this.chunks.forEach(function(w){var S=w.pattern,E=w.alphabet,O=w.startIndex,x=function(B,R,we){var N=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Ye=N.location,Rt=Ye===void 0?v.location:Ye,Ze=N.distance,se=Ze===void 0?v.distance:Ze,Je=N.threshold,Ut=Je===void 0?v.threshold:Je,et=N.findAllMatches,qt=et===void 0?v.findAllMatches:et,tt=N.minMatchCharLength,nt=tt===void 0?v.minMatchCharLength:tt,rt=N.includeMatches,it=rt===void 0?v.includeMatches:rt,ot=N.ignoreLocation,ae=ot===void 0?v.ignoreLocation:ot;if(R.length>32)throw new Error(mt(32));for(var ce,V=R.length,ee=B.length,j=Math.max(0,Math.min(Rt,ee)),G=Ut,Q=j,ue=nt>1||it,Se=ue?Array(ee):[];(ce=B.indexOf(R,Q))>-1;){var Bt=ie(R,{currentLocation:ce,expectedLocation:j,distance:se,ignoreLocation:ae});if(G=Math.min(Bt,G),Q=ce+V,ue)for(var Ee=0;Ee<V;)Se[ce+Ee]=1,Ee+=1}Q=-1;for(var le=[],xe=1,he=V+ee,Kt=1<<V-1,H=0;H<V;H+=1){for(var de=0,D=he;de<D;){var Dt=ie(R,{errors:H,currentLocation:j+D,expectedLocation:j,distance:se,ignoreLocation:ae});Dt<=G?de=D:he=D,D=Math.floor((he-de)/2+de)}he=D;var st=Math.max(1,j-D+1),Le=qt?ee:Math.min(j+D,ee)+V,W=Array(Le+2);W[Le+1]=(1<<H)-1;for(var U=Le;U>=st;U-=1){var fe=U-1,at=we[B.charAt(fe)];if(ue&&(Se[fe]=+!!at),W[U]=(W[U+1]<<1|1)&at,H&&(W[U]|=(le[U+1]|le[U])<<1|1|le[U+1]),W[U]&Kt&&(xe=ie(R,{errors:H,currentLocation:fe,expectedLocation:j,distance:se,ignoreLocation:ae}))<=G){if(G=xe,(Q=fe)<=j)break;st=Math.max(1,2*j-Q)}}var Nt=ie(R,{errors:H+1,currentLocation:j,expectedLocation:j,distance:se,ignoreLocation:ae});if(Nt>G)break;le=W}var Ae={isMatch:Q>=0,score:Math.max(.001,xe)};if(ue){var ct=yt(Se,nt);ct.length?it&&(Ae.indices=ct):Ae.isMatch=!1}return Ae}(e,S,E,{location:c+O,distance:u,threshold:l,findAllMatches:g,minMatchCharLength:d,includeMatches:i,ignoreLocation:f}),L=x.isMatch,$=x.score,z=x.indices;L&&(b=!0),y+=$,L&&z&&(m=[].concat(_(m),_(z)))});var M={isMatch:b,score:b?y/this.chunks.length:1};return b&&i&&(M.indices=m),M}}]),r}(),K=function(){function r(e){s(this,r),this.pattern=e}return p(r,[{key:"search",value:function(){}}],[{key:"isMultiMatch",value:function(e){return He(e,this.multiRegex)}},{key:"isSingleMatch",value:function(e){return He(e,this.singleRegex)}}]),r}();function He(r,e){var t=r.match(e);return t?t[1]:null}var bt=function(r){P(t,r);var e=C(t);function t(n){return s(this,t),e.call(this,n)}return p(t,[{key:"search",value:function(n){var i=n===this.pattern;return{isMatch:i,score:i?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"exact"}},{key:"multiRegex",get:function(){return/^="(.*)"$/}},{key:"singleRegex",get:function(){return/^=(.*)$/}}]),t}(K),Mt=function(r){P(t,r);var e=C(t);function t(n){return s(this,t),e.call(this,n)}return p(t,[{key:"search",value:function(n){var i=n.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,n.length-1]}}}],[{key:"type",get:function(){return"inverse-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"$/}},{key:"singleRegex",get:function(){return/^!(.*)$/}}]),t}(K),It=function(r){P(t,r);var e=C(t);function t(n){return s(this,t),e.call(this,n)}return p(t,[{key:"search",value:function(n){var i=n.startsWith(this.pattern);return{isMatch:i,score:i?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"prefix-exact"}},{key:"multiRegex",get:function(){return/^\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^\^(.*)$/}}]),t}(K),wt=function(r){P(t,r);var e=C(t);function t(n){return s(this,t),e.call(this,n)}return p(t,[{key:"search",value:function(n){var i=!n.startsWith(this.pattern);return{isMatch:i,score:i?0:1,indices:[0,n.length-1]}}}],[{key:"type",get:function(){return"inverse-prefix-exact"}},{key:"multiRegex",get:function(){return/^!\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^!\^(.*)$/}}]),t}(K),St=function(r){P(t,r);var e=C(t);function t(n){return s(this,t),e.call(this,n)}return p(t,[{key:"search",value:function(n){var i=n.endsWith(this.pattern);return{isMatch:i,score:i?0:1,indices:[n.length-this.pattern.length,n.length-1]}}}],[{key:"type",get:function(){return"suffix-exact"}},{key:"multiRegex",get:function(){return/^"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^(.*)\$$/}}]),t}(K),Et=function(r){P(t,r);var e=C(t);function t(n){return s(this,t),e.call(this,n)}return p(t,[{key:"search",value:function(n){var i=!n.endsWith(this.pattern);return{isMatch:i,score:i?0:1,indices:[0,n.length-1]}}}],[{key:"type",get:function(){return"inverse-suffix-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^!(.*)\$$/}}]),t}(K),ze=function(r){P(t,r);var e=C(t);function t(n){var i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.location,c=a===void 0?v.location:a,u=o.threshold,l=u===void 0?v.threshold:u,g=o.distance,d=g===void 0?v.distance:g,f=o.includeMatches,m=f===void 0?v.includeMatches:f,y=o.findAllMatches,b=y===void 0?v.findAllMatches:y,M=o.minMatchCharLength,w=M===void 0?v.minMatchCharLength:M,S=o.isCaseSensitive,E=S===void 0?v.isCaseSensitive:S,O=o.ignoreLocation,x=O===void 0?v.ignoreLocation:O;return s(this,t),(i=e.call(this,n))._bitapSearch=new Ne(n,{location:c,threshold:l,distance:d,includeMatches:m,findAllMatches:b,minMatchCharLength:w,isCaseSensitive:E,ignoreLocation:x}),i}return p(t,[{key:"search",value:function(n){return this._bitapSearch.searchIn(n)}}],[{key:"type",get:function(){return"fuzzy"}},{key:"multiRegex",get:function(){return/^"(.*)"$/}},{key:"singleRegex",get:function(){return/^(.*)$/}}]),t}(K),Ve=function(r){P(t,r);var e=C(t);function t(n){return s(this,t),e.call(this,n)}return p(t,[{key:"search",value:function(n){for(var i,o=0,a=[],c=this.pattern.length;(i=n.indexOf(this.pattern,o))>-1;)o=i+c,a.push([i,o-1]);var u=!!a.length;return{isMatch:u,score:u?0:1,indices:a}}}],[{key:"type",get:function(){return"include"}},{key:"multiRegex",get:function(){return/^'"(.*)"$/}},{key:"singleRegex",get:function(){return/^'(.*)$/}}]),t}(K),ke=[bt,Ve,It,wt,Et,St,Mt,ze],Ge=ke.length,xt=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;function Lt(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return r.split("|").map(function(t){for(var n=t.trim().split(xt).filter(function(y){return y&&!!y.trim()}),i=[],o=0,a=n.length;o<a;o+=1){for(var c=n[o],u=!1,l=-1;!u&&++l<Ge;){var g=ke[l],d=g.isMultiMatch(c);d&&(i.push(new g(d,e)),u=!0)}if(!u)for(l=-1;++l<Ge;){var f=ke[l],m=f.isSingleMatch(c);if(m){i.push(new f(m,e));break}}}return i})}var At=new Set([ze.type,Ve.type]),Ot=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.isCaseSensitive,i=n===void 0?v.isCaseSensitive:n,o=t.includeMatches,a=o===void 0?v.includeMatches:o,c=t.minMatchCharLength,u=c===void 0?v.minMatchCharLength:c,l=t.ignoreLocation,g=l===void 0?v.ignoreLocation:l,d=t.findAllMatches,f=d===void 0?v.findAllMatches:d,m=t.location,y=m===void 0?v.location:m,b=t.threshold,M=b===void 0?v.threshold:b,w=t.distance,S=w===void 0?v.distance:w;s(this,r),this.query=null,this.options={isCaseSensitive:i,includeMatches:a,minMatchCharLength:u,findAllMatches:f,ignoreLocation:g,location:y,threshold:M,distance:S},this.pattern=i?e:e.toLowerCase(),this.query=Lt(this.pattern,this.options)}return p(r,[{key:"searchIn",value:function(e){var t=this.query;if(!t)return{isMatch:!1,score:1};var n=this.options,i=n.includeMatches;e=n.isCaseSensitive?e:e.toLowerCase();for(var o=0,a=[],c=0,u=0,l=t.length;u<l;u+=1){var g=t[u];a.length=0,o=0;for(var d=0,f=g.length;d<f;d+=1){var m=g[d],y=m.search(e),b=y.isMatch,M=y.indices,w=y.score;if(!b){c=0,o=0,a.length=0;break}if(o+=1,c+=w,i){var S=m.constructor.type;At.has(S)?a=[].concat(_(a),_(M)):a.push(M)}}if(o){var E={isMatch:!0,score:c/o};return i&&(E.indices=a),E}}return{isMatch:!1,score:1}}}],[{key:"condition",value:function(e,t){return t.useExtendedSearch}}]),r}(),oe=[];function be(r,e){for(var t=0,n=oe.length;t<n;t+=1){var i=oe[t];if(i.condition(r,e))return new i(r,e)}return new Ne(r,e)}var Me="$and",Qe="$or",We="$path",Ct="$val",Ie=function(r){return!(!r[Me]&&!r[Qe])},_t=function(r){return!!r[We]},Ft=function(r){return!F(r)&&Re(r)&&!Ie(r)},Xe=function(r){return k({},Me,Object.keys(r).map(function(e){return k({},e,r[e])}))};function Tt(r,e){var t=e.ignoreFieldNorm,n=t===void 0?v.ignoreFieldNorm:t;r.forEach(function(i){var o=1;i.matches.forEach(function(a){var c=a.key,u=a.norm,l=a.score,g=c?c.weight:null;o*=Math.pow(l===0&&g?Number.EPSILON:l,(g||1)*(n?1:u))}),i.score=o})}function jt(r,e){var t=r.matches;e.matches=[],A(t)&&t.forEach(function(n){if(A(n.indices)&&n.indices.length){var i={indices:n.indices,value:n.value};n.key&&(i.key=n.key.src),n.idx>-1&&(i.refIndex=n.idx),e.matches.push(i)}})}function Pt(r,e){e.score=r.score}function $t(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.includeMatches,i=n===void 0?v.includeMatches:n,o=t.includeScore,a=o===void 0?v.includeScore:o,c=[];return i&&c.push(jt),a&&c.push(Pt),r.map(function(u){var l=u.idx,g={item:e[l],refIndex:l};return c.length&&c.forEach(function(d){d(u,g)}),g})}var J=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;s(this,r),this.options=X({},v,{},t),this.options.useExtendedSearch,this._keyStore=new pt(this.options.keys),this.setCollection(e,n)}return p(r,[{key:"setCollection",value:function(e,t){if(this._docs=e,t&&!(t instanceof ye))throw new Error("Incorrect 'index' type");this._myIndex=t||De(this.options.keys,this._docs,{getFn:this.options.getFn})}},{key:"add",value:function(e){A(e)&&(this._docs.push(e),this._myIndex.add(e))}},{key:"remove",value:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){return!1},t=[],n=0,i=this._docs.length;n<i;n+=1){var o=this._docs[n];e(o,n)&&(this.removeAt(n),n-=1,i-=1,t.push(o))}return t}},{key:"removeAt",value:function(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}},{key:"getIndex",value:function(){return this._myIndex}},{key:"search",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.limit,i=n===void 0?-1:n,o=this.options,a=o.includeMatches,c=o.includeScore,u=o.shouldSort,l=o.sortFn,g=o.ignoreFieldNorm,d=T(e)?T(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Tt(d,{ignoreFieldNorm:g}),u&&d.sort(l),re(i)&&i>-1&&(d=d.slice(0,i)),$t(d,this._docs,{includeMatches:a,includeScore:c})}},{key:"_searchStringList",value:function(e){var t=be(e,this.options),n=this._myIndex.records,i=[];return n.forEach(function(o){var a=o.v,c=o.i,u=o.n;if(A(a)){var l=t.searchIn(a),g=l.isMatch,d=l.score,f=l.indices;g&&i.push({item:a,idx:c,matches:[{score:d,value:a,norm:u,indices:f}]})}}),i}},{key:"_searchLogical",value:function(e){var t=this,n=function(c,u){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},g=l.auto,d=g===void 0||g,f=function m(y){var b=Object.keys(y),M=_t(y);if(!M&&b.length>1&&!Ie(y))return m(Xe(y));if(Ft(y)){var w=M?y[We]:b[0],S=M?y[Ct]:y[w];if(!T(S))throw new Error(ft(w));var E={keyId:ve(w),pattern:S};return d&&(E.searcher=be(S,u)),E}var O={children:[],operator:b[0]};return b.forEach(function(x){var L=y[x];F(L)&&L.forEach(function($){O.children.push(m($))})}),O};return Ie(c)||(c=Xe(c)),f(c)}(e,this.options),i=this._myIndex.records,o={},a=[];return i.forEach(function(c){var u=c.$,l=c.i;if(A(u)){var g=function d(f,m,y){if(!f.children){var b=f.keyId,M=f.searcher,w=t._findMatches({key:t._keyStore.get(b),value:t._myIndex.getValueForItemAtKeyId(m,b),searcher:M});return w&&w.length?[{idx:y,item:m,matches:w}]:[]}switch(f.operator){case Me:for(var S=[],E=0,O=f.children.length;E<O;E+=1){var x=d(f.children[E],m,y);if(!x.length)return[];S.push.apply(S,_(x))}return S;case Qe:for(var L=[],$=0,z=f.children.length;$<z;$+=1){var B=d(f.children[$],m,y);if(B.length){L.push.apply(L,_(B));break}}return L}}(n,u,l);g.length&&(o[l]||(o[l]={idx:l,item:u,matches:[]},a.push(o[l])),g.forEach(function(d){var f,m=d.matches;(f=o[l].matches).push.apply(f,_(m))}))}}),a}},{key:"_searchObjectList",value:function(e){var t=this,n=be(e,this.options),i=this._myIndex,o=i.keys,a=i.records,c=[];return a.forEach(function(u){var l=u.$,g=u.i;if(A(l)){var d=[];o.forEach(function(f,m){d.push.apply(d,_(t._findMatches({key:f,value:l[m],searcher:n})))}),d.length&&c.push({idx:g,item:l,matches:d})}}),c}},{key:"_findMatches",value:function(e){var t=e.key,n=e.value,i=e.searcher;if(!A(n))return[];var o=[];if(F(n))n.forEach(function(f){var m=f.v,y=f.i,b=f.n;if(A(m)){var M=i.searchIn(m),w=M.isMatch,S=M.score,E=M.indices;w&&o.push({score:S,key:t,value:m,idx:y,norm:b,indices:E})}});else{var a=n.v,c=n.n,u=i.searchIn(a),l=u.isMatch,g=u.score,d=u.indices;l&&o.push({score:g,key:t,value:a,norm:c,indices:d})}return o}}]),r}();return J.version="6.4.6",J.createIndex=De,J.parseIndex=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.getFn,n=t===void 0?v.getFn:t,i=r.keys,o=r.records,a=new ye({getFn:n});return a.setKeys(i),a.setIndexRecords(o),a},J.config=v,function(){oe.push.apply(oe,arguments)}(Ot),J},typeof Ce=="object"&&typeof _e!="undefined"?_e.exports=me():typeof define=="function"&&define.amd?define(me):(Fe=Fe||self).Fuse=me()});var je=Zt(ut());var Te=class{constructor(s,h,p){this.title=s,this.action=h,this.parentTitle=p}},pe=Te;var Pe=class{constructor(s,h){console.log("Initialising TurboAdmin"),this.options=h,this.paletteElement=document.getElementById("ta-command-palette-container"),this.paletteInputElement=document.getElementById("ta-command-palette-input"),this.paletteItemsElement=document.getElementById("ta-command-palette-items"),this.paletteData=s,this.paletteItems=this.buildPaletteItems(),this.selectedItem=this.paletteItems[0],this.updatePaletteItems(),this.paletteFuseOptions=[],this.paletteFuse=null,typeof je.default=="function"&&(this.paletteFuseOptions={keys:["innerText"]},this.paletteFuse=new je.default(this.paletteItems,this.paletteFuseOptions),document.addEventListener("keydown",p=>this.handleGlobalKey(p)),this.paletteInputElement.addEventListener("keydown",p=>{this.paletteActions(p)}),this.paletteElement.addEventListener("click",p=>{this.checkForClickToClose(p)}))}buildPaletteItems(){let s=[];return this.paletteData.forEach(h=>{let p=document.createElement("li"),k=document.createElement("a");p.appendChild(k),k.href=h.action;let q=h.title;h.parentTitle&&(q=h.parentTitle+": "+q),k.innerHTML=q,s.push(p)}),s}handleGlobalKey(s){this.shortcutKeysPressed(s)&&(this.paletteShown()?this.hidePalette():this.showPalette()),s.code==="Escape"&&this.paletteShown()&&this.hidePalette(),(s.code==="ArrowUp"||s.code==="ArrowDown"||s.code==="Enter")&&this.paletteShown()&&s.preventDefault()}shortcutKeysPressed(s){return this.options.shortcutKeys.reduce((p,k)=>p||!(navigator.platform.startsWith("Mac")&&k.meta&&!s.metaKey||k.alt&&!s.altKey||k.shift&&!s.shiftKey||k.ctrl&&!s.ctrlKey||"Key"+k.key.toUpperCase()!==s.code),!1)}paletteActions(s){if(s.code==="ArrowDown"&&this.paletteShown()){s.preventDefault(),this.moveDown();return}if(s.code==="ArrowUp"&&this.paletteShown()){s.preventDefault(),this.moveUp();return}s.code==="Enter"&&this.paletteShown()&&this.doAction(),this.paletteSearchAndUpdate()}showPalette(){this.paletteInputElement.value="",this.paletteElement?.classList.add("active"),this.paletteInputElement?.focus()}hidePalette(){this.paletteElement?.classList.remove("active")}paletteShown(){return this.paletteElement?.classList.contains("active")}checkForClickToClose(s){s.target.id===this.paletteElement.id&&this.hidePalette()}setSelectedElement(){this.paletteItemsElement?.querySelectorAll("li.selected")?.forEach(s=>s.classList.remove("selected")),this.selectedItem&&(this.selectedItem.classList.add("selected"),this.scrollList())}scrollList(){this.selectedItem.offsetTop<this.paletteItemsElement.scrollTop&&(this.paletteItemsElement.scrollTop=this.selectedItem.offsetTop),this.selectedItem.offsetTop+this.selectedItem.offsetHeight>this.paletteItemsElement.offsetHeight+this.paletteItemsElement.scrollTop&&(this.paletteItemsElement.scrollTop=this.selectedItem.offsetTop+this.selectedItem.offsetHeight-this.paletteItemsElement.offsetHeight)}moveDown(){let s=this.selectedItem.nextElementSibling;s&&(this.selectedItem=s,this.setSelectedElement())}moveUp(){let s=this.selectedItem.previousElementSibling;s&&(this.selectedItem=s,this.setSelectedElement())}doAction(){this.hidePalette(),this.selectedItem.querySelector("a").click()}selectedItemDisplayed(){return Array.from(this.paletteItemsElement.childNodes).includes(this.selectedItem)}paletteSearchAndUpdate(){this.paletteSearch(),this.updatePaletteItems()}paletteSearch(){this.paletteItems=this.buildPaletteItems(),this.paletteInputElement.value!==""&&(this.paletteItems=this.paletteFuse.search(this.paletteInputElement.value).map(s=>s.item))}updatePaletteItems(){let s=document.createElement("ul");s.id="ta-command-palette-items",this.paletteItems.forEach(h=>{s.appendChild(h)}),this.paletteItemsElement.replaceChildren(...s.children),this.selectedItemDisplayed()||(this.selectedItem=this.paletteItems[0]),this.setSelectedElement()}},lt=Pe;var $e=class{constructor(s){if(document.getElementById("ta-command-palette-container")){console.log("TurboAdmin already initialised - I won't make a second copy!");return}this.options=s,this.isBackend()?(this.siteUrl=window.location.href.match(/(^.*wp-admin)/)[1],this.home=document.getElementById("wp-admin-bar-site-name").querySelector("a").href):document.getElementById("wpadminbar")&&(this.siteUrl=document.getElementById("wp-admin-bar-dashboard").querySelector("a").href,this.home=null),this.menu=this.getMenu(),this.addAdditionalMenuItems(),this.addPalette(),this.turboAdminPalette=new lt(this.menu,this.options)}getMenu(){let s=[],h=document.getElementById("adminmenu");return h&&h.querySelectorAll("li.menu-top").forEach(k=>{let q=k.querySelector("a.menu-top"),X=q.querySelector(".wp-menu-name").innerHTML,P=q.href,Y="",te=new pe(X,P,Y);s.push(te);let ne=k.querySelector(".wp-submenu");if(!ne)return;let C=ne.querySelectorAll("li a");!C||C.forEach(_=>{let Z=X,F=_.innerHTML,T=_.href,re=new pe(F,T,Z);s.push(re)})}),s}isBackend(){return document.body.classList.contains("wp-admin")}addAdditionalMenuItems(){[{detectType:"dom",detectSelector:"body.wp-admin #wp-admin-bar-site-name-default a",itemTitleFunction:()=>"View/visit site",itemUrlFunction:h=>h.href},{detectType:"dom",detectSelector:"#wp-admin-bar-dashboard a",itemTitleFunction:h=>h.textContent,itemUrlFunction:h=>h.href},{detectType:"dom",detectSelector:"#wpadminbar",itemTitleFunction:()=>"Logout",itemUrlFunction:()=>document.getElementById("wp-admin-bar-logout")?.querySelector("a")?.href},{detectType:"dom",detectSelector:"#wp-admin-bar-edit a",itemTitleFunction:h=>h.textContent,itemUrlFunction:h=>h.href},{detectType:"dom",detectSelector:"#wp-admin-bar-customize a",itemTitleFunction:h=>h.textContent,itemUrlFunction:h=>h.href},{detectType:"dom",detectSelectorNone:"#wpadminbar, #loginform",itemTitleFunction:()=>"Log in",itemUrlFunction:()=>document.querySelector('link[rel="https://api.w.org/"]')?.href?.replace("wp-json/","wp-admin/")},{detectType:"dom",detectSelector:"#backtoblog a",itemTitleFunction:()=>"View/visit site",itemUrlFunction:h=>h.href}].forEach(h=>{let p=!1,k=null;h.detectType==="url"?p=Boolean(window.location.href.includes(h.detectPattern)):h.detectType==="dom"&&(h.detectSelector?(k=document.querySelector(h.detectSelector),p=Boolean(k)):h.detectSelectorNone&&(k=document.querySelector(h.detectSelectorNone),p=!Boolean(k))),!!p&&this.menu.push(new pe(h.itemTitleFunction(k),h.itemUrlFunction(k),""))})}addPalette(){let s=document.createElement("div");s.id="ta-command-palette-container";let h=document.createElement("div");h.id="ta-command-palette";let p=document.createElement("input");p.id="ta-command-palette-input",p.name="ta-command-palette-input",p.type="text";let k=document.createElement("ul");k.id="ta-command-palette-items",s.appendChild(h),h.appendChild(p),h.appendChild(k),document.querySelector(this.options.appendToElement??"body").appendChild(s)}},ht=$e;globalThis.turboAdmin=null;globalThis.turboAdminOptions={shortcutKeys:globalThis.wpTurboAdmin.keys};document.addEventListener("DOMContentLoaded",I=>{turboAdmin=new ht(globalThis.turboAdminOptions)});})();
//# sourceMappingURL=main.min.js.map
